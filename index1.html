<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fintelligence MVP - Agile Development Roadmap</title>
    <!-- React 18 - Development build for better error messages -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #06b6d4;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --border: #e5e7eb;
        }

        [data-theme="dark"] {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border: #374151;
            --gray-100: #374151;
            --gray-200: #4b5563;
            --gray-300: #6b7280;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s ease;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #1e3a8a 0%, #581c87 100%);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        [data-theme="dark"] .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #581c87 100%);
        }

        .theme-toggle {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1) rotate(180deg);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
            animation: fadeInDown 0.6s ease;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .nav-tabs {
            display: flex;
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--border);
            overflow-x: auto;
            transition: all 0.3s ease;
        }

        .nav-tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            white-space: nowrap;
            position: relative;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-tab:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .nav-tab:hover::after {
            width: 100%;
        }

        .nav-tab.active {
            background: var(--bg-primary);
            color: var(--primary);
        }

        .nav-tab.active::after {
            width: 100%;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
            color: var(--text-primary);
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            animation: scaleIn 0.5s ease;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .stat-card h3 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-card .subtitle {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .chart-container {
            background: var(--bg-primary);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: slideIn 0.5s ease;
            transition: all 0.3s ease;
        }

        .chart-container:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .chart-container h2 {
            margin-bottom: 20px;
            color: var(--text-primary);
            font-size: 1.5em;
        }

        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .kanban-column {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            min-height: 400px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            animation: fadeIn 0.6s ease;
        }

        .kanban-header {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-primary);
        }

        .kanban-count {
            background: var(--gray-700);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            animation: scaleIn 0.3s ease;
        }

        .task-card {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            cursor: move;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
            animation: slideIn 0.4s ease;
            position: relative;
        }

        .task-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .task-card:hover .task-actions {
            opacity: 1;
        }

        .task-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .task-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .task-action-btn {
            background: var(--primary);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .task-action-btn:hover {
            transform: scale(1.1);
        }

        .task-action-btn.delete {
            background: var(--danger);
        }

        .task-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            padding-right: 60px;
        }

        .task-description {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        .task-priority {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .task-priority:hover {
            transform: scale(1.05);
        }

        .priority-high {
            background: #fee2e2;
            color: var(--danger);
        }

        .priority-medium {
            background: #fef3c7;
            color: var(--warning);
        }

        .priority-low {
            background: #dbeafe;
            color: var(--info);
        }

        .task-assignee {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .avatar:hover {
            transform: scale(1.2);
        }

        .add-task-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .add-task-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .add-task-btn:active {
            transform: translateY(0);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-primary);
            padding: 30px;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-content h2 {
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray-300);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--gray-600);
            color: white;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .save-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1001;
        }

        .save-indicator.show {
            opacity: 1;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .economics-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            animation: fadeIn 0.5s ease;
        }

        .economics-table th,
        .economics-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }

        .economics-table th {
            background: var(--bg-secondary);
            font-weight: 700;
        }

        .economics-table tr {
            transition: all 0.2s ease;
        }

        .economics-table tr:hover {
            background: var(--bg-secondary);
        }

        .feature-card, .roadmap-card, .tech-stack-card {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease;
        }

        .feature-card {
            border-left: 4px solid var(--success);
        }

        .feature-card:hover, .roadmap-card:hover, .tech-stack-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .feature-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .feature-title {
            font-weight: 700;
            font-size: 1.1em;
            color: var(--text-primary);
        }

        .feature-status {
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .status-planned {
            background: #dbeafe;
            color: var(--info);
        }

        .tech-stack-card {
            border-top: 4px solid var(--primary);
        }

        .tech-stack-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .tech-list {
            list-style: none;
        }

        .tech-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .tech-list li:hover {
            padding-left: 10px;
            background: var(--bg-secondary);
        }

        .tech-badge {
            background: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .roadmap-phase {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .phase-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2em;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .phase-number:hover {
            transform: scale(1.1) rotate(360deg);
        }

        .phase-details {
            flex: 1;
        }

        .phase-title {
            font-weight: 700;
            font-size: 1.2em;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .phase-duration {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .progress-bar {
            background: var(--gray-200);
            border-radius: 8px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--success) 0%, #14b8a6 100%);
            height: 100%;
            transition: width 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .cost-breakdown {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .cost-breakdown h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-600);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        @media (max-width: 768px) {
            .kanban-board {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .theme-toggle {
                top: 20px;
                right: 20px;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div class="save-indicator" id="saveIndicator">üíæ Saved!</div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // IndexedDB Manager with localStorage fallback
        class DBManager {
            constructor() {
                this.dbName = 'FintelligenceDB';
                this.version = 1;
                this.db = null;
                this.useLocalStorage = false;
            }

            async init() {
                // Try IndexedDB first
                try {
                    if (!window.indexedDB) {
                        throw new Error('IndexedDB not supported');
                    }

                    return new Promise((resolve, reject) => {
                        const request = indexedDB.open(this.dbName, this.version);

                        request.onerror = () => {
                            console.warn('IndexedDB failed, using localStorage');
                            this.useLocalStorage = true;
                            resolve(true);
                        };

                        request.onsuccess = () => {
                            this.db = request.result;
                            resolve(this.db);
                        };

                        request.onupgradeneeded = (event) => {
                            const db = event.target.result;
                            
                            if (!db.objectStoreNames.contains('tasks')) {
                                db.createObjectStore('tasks', { keyPath: 'id' });
                            }
                            if (!db.objectStoreNames.contains('settings')) {
                                db.createObjectStore('settings', { keyPath: 'key' });
                            }
                        };
                    });
                } catch (error) {
                    console.warn('IndexedDB error, using localStorage:', error);
                    this.useLocalStorage = true;
                    return Promise.resolve(true);
                }
            }

            async saveTasks(tasks) {
                if (this.useLocalStorage) {
                    localStorage.setItem('fintelligence_tasks', JSON.stringify(tasks));
                    return Promise.resolve();
                }

                try {
                    const transaction = this.db.transaction(['tasks'], 'readwrite');
                    const store = transaction.objectStore('tasks');
                    
                    await store.clear();
                    
                    for (const task of tasks) {
                        await store.put(task);
                    }
                    
                    return transaction.complete;
                } catch (error) {
                    console.error('Save tasks error:', error);
                    return Promise.resolve();
                }
            }

            async getTasks() {
                if (this.useLocalStorage) {
                    const data = localStorage.getItem('fintelligence_tasks');
                    return Promise.resolve(data ? JSON.parse(data) : []);
                }

                try {
                    const transaction = this.db.transaction(['tasks'], 'readonly');
                    const store = transaction.objectStore('tasks');
                    const request = store.getAll();

                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => resolve(request.result || []);
                        request.onerror = () => resolve([]);
                    });
                } catch (error) {
                    console.error('Get tasks error:', error);
                    return Promise.resolve([]);
                }
            }

            async saveSetting(key, value) {
                if (this.useLocalStorage) {
                    localStorage.setItem(`fintelligence_${key}`, JSON.stringify(value));
                    return Promise.resolve();
                }

                try {
                    const transaction = this.db.transaction(['settings'], 'readwrite');
                    const store = transaction.objectStore('settings');
                    await store.put({ key, value });
                    return transaction.complete;
                } catch (error) {
                    console.error('Save setting error:', error);
                    return Promise.resolve();
                }
            }

            async getSetting(key) {
                if (this.useLocalStorage) {
                    const data = localStorage.getItem(`fintelligence_${key}`);
                    return Promise.resolve(data ? JSON.parse(data) : null);
                }

                try {
                    const transaction = this.db.transaction(['settings'], 'readonly');
                    const store = transaction.objectStore('settings');
                    const request = store.get(key);

                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => resolve(request.result?.value);
                        request.onerror = () => resolve(null);
                    });
                } catch (error) {
                    console.error('Get setting error:', error);
                    return Promise.resolve(null);
                }
            }
        }

        const dbManager = new DBManager();

        // Main App Component
        function App() {
            const [theme, setTheme] = useState('light');
            const [activeTab, setActiveTab] = useState('overview');
            const [tasks, setTasks] = useState([]);
            const [loading, setLoading] = useState(true);
            const [showModal, setShowModal] = useState(false);
            const [editingTask, setEditingTask] = useState(null);
            const [currentSprint, setCurrentSprint] = useState(1);
            const [currentColumn, setCurrentColumn] = useState('todo');

            useEffect(() => {
                initializeApp();
            }, []);

            const initializeApp = async () => {
                try {
                    await dbManager.init();
                    
                    const savedTheme = await dbManager.getSetting('theme');
                    if (savedTheme) {
                        setTheme(savedTheme);
                        document.documentElement.setAttribute('data-theme', savedTheme);
                    }

                    const savedTasks = await dbManager.getTasks();
                    if (savedTasks && savedTasks.length > 0) {
                        setTasks(savedTasks);
                    } else {
                        setTasks(getDefaultTasks());
                    }

                    setLoading(false);
                } catch (error) {
                    console.error('Failed to initialize app:', error);
                    setLoading(false);
                    setTasks(getDefaultTasks());
                }
            };

            const toggleTheme = async () => {
                const newTheme = theme === 'light' ? 'dark' : 'light';
                setTheme(newTheme);
                document.documentElement.setAttribute('data-theme', newTheme);
                await dbManager.saveSetting('theme', newTheme);
                showSaveIndicator();
            };

            const saveTasks = async (newTasks) => {
                setTasks(newTasks);
                await dbManager.saveTasks(newTasks);
                showSaveIndicator();
            };

            const showSaveIndicator = () => {
                const indicator = document.getElementById('saveIndicator');
                if (indicator) {
                    indicator.classList.add('show');
                    setTimeout(() => {
                        indicator.classList.remove('show');
                    }, 2000);
                }
            };

            const moveTask = async (taskId, fromColumn, toColumn, sprint) => {
                const newTasks = tasks.map(task => {
                    if (task.id === taskId && task.sprint === sprint) {
                        return { ...task, column: toColumn };
                    }
                    return task;
                });
                await saveTasks(newTasks);
            };

            const addTask = async (taskData) => {
                const newTask = {
                    id: Date.now().toString(),
                    ...taskData,
                    sprint: currentSprint,
                    column: currentColumn,
                    createdAt: new Date().toISOString()
                };
                await saveTasks([...tasks, newTask]);
                setShowModal(false);
            };

            const updateTask = async (taskId, taskData) => {
                const newTasks = tasks.map(task => 
                    task.id === taskId ? { ...task, ...taskData } : task
                );
                await saveTasks(newTasks);
                setShowModal(false);
                setEditingTask(null);
            };

            const deleteTask = async (taskId) => {
                if (confirm('Are you sure you want to delete this task?')) {
                    const newTasks = tasks.filter(task => task.id !== taskId);
                    await saveTasks(newTasks);
                }
            };

            const openEditModal = (task) => {
                setEditingTask(task);
                setShowModal(true);
            };

            if (loading) {
                return (
                    <div className="container">
                        <div className="loading">
                            <div className="spinner"></div>
                            <p>Loading Fintelligence MVP Dashboard...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <Header theme={theme} onToggleTheme={toggleTheme} />
                    <Navigation activeTab={activeTab} onTabChange={setActiveTab} />
                    
                    <TabContent 
                        activeTab={activeTab}
                        tasks={tasks}
                        onMoveTask={moveTask}
                        onAddTask={addTask}
                        onUpdateTask={updateTask}
                        onDeleteTask={deleteTask}
                        onEditTask={openEditModal}
                        showModal={showModal}
                        setShowModal={setShowModal}
                        editingTask={editingTask}
                        setEditingTask={setEditingTask}
                        currentSprint={currentSprint}
                        setCurrentSprint={setCurrentSprint}
                        currentColumn={currentColumn}
                        setCurrentColumn={setCurrentColumn}
                    />
                </div>
            );
        }

        function Header({ theme, onToggleTheme }) {
            return (
                <div className="header">
                    <button className="theme-toggle" onClick={onToggleTheme}>
                        {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}
                    </button>
                    <h1>üöÄ Fintelligence MVP Development</h1>
                    <p>Agile Project Management | Quant Models + LLM Robo-Advisory + FnO Signals</p>
                </div>
            );
        }

        function Navigation({ activeTab, onTabChange }) {
            const tabs = [
                { id: 'overview', label: 'üìä Overview' },
                { id: 'roadmap', label: 'üó∫Ô∏è Roadmap' },
                { id: 'sprint1', label: 'Sprint 1' },
                { id: 'sprint2', label: 'Sprint 2' },
                { id: 'sprint3', label: 'Sprint 3' },
                { id: 'sprint4', label: 'Sprint 4' },
                { id: 'sprint5', label: 'Sprint 5' },
                { id: 'sprint6', label: 'Sprint 6' },
                { id: 'techstack', label: 'üíª Tech Stack' },
                { id: 'economics', label: 'üí∞ Economics' }
            ];

            return (
                <div className="nav-tabs">
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            className={`nav-tab ${activeTab === tab.id ? 'active' : ''}`}
                            onClick={() => onTabChange(tab.id)}
                        >
                            {tab.label}
                        </button>
                    ))}
                </div>
            );
        }

        function TabContent({ activeTab, tasks, onMoveTask, onAddTask, onUpdateTask, onDeleteTask, onEditTask, showModal, setShowModal, editingTask, setEditingTask, currentSprint, setCurrentSprint, currentColumn, setCurrentColumn }) {
            return (
                <>
                    {activeTab === 'overview' && <OverviewTab tasks={tasks} />}
                    {activeTab === 'roadmap' && <RoadmapTab />}
                    {activeTab.startsWith('sprint') && (
                        <SprintTab
                            sprint={parseInt(activeTab.replace('sprint', ''))}
                            tasks={tasks}
                            onMoveTask={onMoveTask}
                            onAddTask={onAddTask}
                            onDeleteTask={onDeleteTask}
                            onEditTask={onEditTask}
                            showModal={showModal}
                            setShowModal={setShowModal}
                            setCurrentSprint={setCurrentSprint}
                            setCurrentColumn={setCurrentColumn}
                        />
                    )}
                    {activeTab === 'techstack' && <TechStackTab />}
                    {activeTab === 'economics' && <EconomicsTab />}

                    {showModal && (
                        <TaskModal
                            onClose={() => {
                                setShowModal(false);
                                setEditingTask(null);
                            }}
                            onSubmit={editingTask ? (data) => onUpdateTask(editingTask.id, data) : onAddTask}
                            editingTask={editingTask}
                        />
                    )}
                </>
            );
        }

        function OverviewTab({ tasks }) {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(t => t.column === 'done').length;
            const inProgressTasks = tasks.filter(t => t.column === 'inprogress').length;
            const progress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            useEffect(() => {
                setTimeout(() => initializeCharts(), 100);
            }, []);

            return (
                <div className="tab-content active">
                    <h2>Project Overview</h2>
                    
                    <div className="stats-grid">
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)'}}>
                            <h3>Total Progress</h3>
                            <div className="value">{progress}%</div>
                            <div className="subtitle">Across all sprints</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)'}}>
                            <h3>Active Tasks</h3>
                            <div className="value">{inProgressTasks}</div>
                            <div className="subtitle">In progress</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)'}}>
                            <h3>Completed Tasks</h3>
                            <div className="value">{completedTasks}</div>
                            <div className="subtitle">Done</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)'}}>
                            <h3>Team Members</h3>
                            <div className="value">4</div>
                            <div className="subtitle">Backend, Mobile, DevOps, You</div>
                        </div>
                    </div>

                    <div className="chart-container">
                        <h2>Sprint Progress Timeline</h2>
                        <canvas id="progressChart"></canvas>
                    </div>

                    <div className="chart-container">
                        <h2>Task Distribution by Category</h2>
                        <canvas id="categoryChart"></canvas>
                    </div>

                    <div className="chart-container">
                        <h2>MVP Features</h2>
                        <div className="feature-card">
                            <div className="feature-header">
                                <div className="feature-title">üìà FnO Index Signals (NIFTY/BANKNIFTY)</div>
                                <div className="feature-status status-planned">Sprint 2-3</div>
                            </div>
                            <p>Real-time options signals, PCR analysis, Open Interest tracking, Max Pain calculator</p>
                        </div>
                        <div className="feature-card">
                            <div className="feature-header">
                                <div className="feature-title">ü§ñ Algorithmic Trading Engine</div>
                                <div className="feature-status status-planned">Sprint 3-4</div>
                            </div>
                            <p>SARIMAX forecasting, Monte Carlo simulations, LSTM predictions, backtesting framework</p>
                        </div>
                        <div className="feature-card">
                            <div className="feature-header">
                                <div className="feature-title">üí° Stock Recommendations</div>
                                <div className="feature-status status-planned">Sprint 2-3</div>
                            </div>
                            <p>SEBI-compliant recommendations, multi-factor analysis, risk profiling, portfolio optimization</p>
                        </div>
                        <div className="feature-card">
                            <div className="feature-header">
                                <div className="feature-title">üí¨ Robo-Advisory Chatbot (Gemma 3B + RAG)</div>
                                <div className="feature-status status-planned">Sprint 4-5</div>
                            </div>
                            <p>Natural language query, context-aware responses, fine-tuned on your recommendations</p>
                        </div>
                        <div className="feature-card">
                            <div className="feature-header">
                                <div className="feature-title">üì± Mobile Apps (iOS + Android)</div>
                                <div className="feature-status status-planned">Sprint 5-6</div>
                            </div>
                            <p>React Native app with portfolio tracking, real-time signals, chat interface</p>
                        </div>
                    </div>
                </div>
            );
        }

        function RoadmapTab() {
            useEffect(() => {
                setTimeout(() => initializeGanttChart(), 100);
            }, []);

            const phases = [
                {
                    num: 1,
                    title: 'Foundation & Infrastructure',
                    duration: 'Weeks 1-4 | Sprint 1',
                    tasks: [
                        'MacBook M5 setup + development environment',
                        'FastAPI backend skeleton + PostgreSQL',
                        'Authentication system (Clerk)',
                        'CI/CD pipeline (GitHub Actions)',
                        'AWS infrastructure setup'
                    ]
                },
                {
                    num: 2,
                    title: 'Quant Engine + FnO Signals',
                    duration: 'Weeks 5-8 | Sprint 2',
                    tasks: [
                        'Stock data pipeline (NSE, yfinance)',
                        'FnO signals engine (PCR, OI, Max Pain)',
                        'SARIMAX forecasting models',
                        'Stock recommendations API',
                        'Background jobs (Celery)'
                    ]
                },
                {
                    num: 3,
                    title: 'Algorithmic Models',
                    duration: 'Weeks 9-12 | Sprint 3',
                    tasks: [
                        'Monte Carlo simulations',
                        'LSTM price predictions',
                        'Portfolio optimization algorithms',
                        'Backtesting framework',
                        'Risk management system'
                    ]
                },
                {
                    num: 4,
                    title: 'LLM Robo-Advisory',
                    duration: 'Weeks 13-16 | Sprint 4',
                    tasks: [
                        'Gemma 3B fine-tuning on recommendations',
                        'RAG pipeline (LangChain + Pinecone)',
                        'Chat API endpoints',
                        'Deploy to Hugging Face Inference',
                        'Prompt engineering & testing'
                    ]
                },
                {
                    num: 5,
                    title: 'Mobile Apps Development',
                    duration: 'Weeks 17-20 | Sprint 5',
                    tasks: [
                        'React Native + Expo setup',
                        'Portfolio dashboard screens',
                        'FnO signals interface',
                        'Stock recommendation views',
                        'Chat interface integration'
                    ]
                },
                {
                    num: 6,
                    title: 'Testing & Launch',
                    duration: 'Weeks 21-24 | Sprint 6',
                    tasks: [
                        'Beta testing (TestFlight + Play Store)',
                        'SEBI compliance review',
                        'Performance optimization',
                        'App Store submissions',
                        'Launch campaign'
                    ]
                }
            ];

            return (
                <div className="tab-content active">
                    <h2>Development Roadmap</h2>
                    
                    {phases.map(phase => (
                        <div className="roadmap-card" key={phase.num}>
                            <div className="roadmap-phase">
                                <div className="phase-number">{phase.num}</div>
                                <div className="phase-details">
                                    <div className="phase-title">{phase.title}</div>
                                    <div className="phase-duration">{phase.duration}</div>
                                </div>
                            </div>
                            <div className="progress-bar">
                                <div className="progress-fill" style={{width: '0%'}}>0%</div>
                            </div>
                            <ul>
                                {phase.tasks.map((task, idx) => (
                                    <li key={idx}>{task}</li>
                                ))}
                            </ul>
                        </div>
                    ))}

                    <div className="chart-container">
                        <h2>Gantt Chart - Project Timeline</h2>
                        <canvas id="ganttChart"></canvas>
                    </div>
                </div>
            );
        }

        function SprintTab({ sprint, tasks, onMoveTask, onAddTask, onDeleteTask, onEditTask, showModal, setShowModal, setCurrentSprint, setCurrentColumn }) {
            const sprintTasks = tasks.filter(t => t.sprint === sprint);
            const todoTasks = sprintTasks.filter(t => t.column === 'todo');
            const inProgressTasks = sprintTasks.filter(t => t.column === 'inprogress');
            const doneTasks = sprintTasks.filter(t => t.column === 'done');

            const sprintData = {
                1: { title: 'Foundation & Infrastructure', weeks: '1-4', dates: 'Jan 13 - Feb 9, 2026', points: 40 },
                2: { title: 'Quant Engine + FnO Signals', weeks: '5-8', dates: 'Feb 10 - Mar 9, 2026', points: 45 },
                3: { title: 'Algorithmic Models', weeks: '9-12', dates: 'Mar 10 - Apr 6, 2026', points: 42 },
                4: { title: 'LLM Robo-Advisory', weeks: '13-16', dates: 'Apr 7 - May 4, 2026', points: 38 },
                5: { title: 'Mobile Apps Development', weeks: '17-20', dates: 'May 5 - Jun 1, 2026', points: 50 },
                6: { title: 'Testing & Launch', weeks: '21-24', dates: 'Jun 2 - Jun 29, 2026', points: 35 }
            };

            const data = sprintData[sprint];

            const handleDragStart = (e, taskId) => {
                e.dataTransfer.setData('taskId', taskId);
                e.currentTarget.classList.add('dragging');
            };

            const handleDragEnd = (e) => {
                e.currentTarget.classList.remove('dragging');
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            const handleDrop = (e, column) => {
                e.preventDefault();
                const taskId = e.dataTransfer.getData('taskId');
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    onMoveTask(taskId, task.column, column, sprint);
                }
            };

            const openModal = (column) => {
                setCurrentSprint(sprint);
                setCurrentColumn(column);
                setShowModal(true);
            };

            return (
                <div className="tab-content active">
                    <h2>Sprint {sprint}: {data.title} (Weeks {data.weeks})</h2>
                    
                    <div className="stats-grid">
                        <div className="stat-card">
                            <h3>Sprint Duration</h3>
                            <div className="value">4 weeks</div>
                            <div className="subtitle">{data.dates}</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)'}}>
                            <h3>Story Points</h3>
                            <div className="value">{data.points}</div>
                            <div className="subtitle">Total planned</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)'}}>
                            <h3>Team Velocity</h3>
                            <div className="value">35-40</div>
                            <div className="subtitle">Points/sprint</div>
                        </div>
                    </div>

                    <div className="kanban-board">
                        <KanbanColumn
                            title="üìã To Do"
                            tasks={todoTasks}
                            column="todo"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAddTask={() => openModal('todo')}
                            onDeleteTask={onDeleteTask}
                            onEditTask={onEditTask}
                        />
                        <KanbanColumn
                            title="üîÑ In Progress"
                            tasks={inProgressTasks}
                            column="inprogress"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAddTask={() => openModal('inprogress')}
                            onDeleteTask={onDeleteTask}
                            onEditTask={onEditTask}
                        />
                        <KanbanColumn
                            title="‚úÖ Done"
                            tasks={doneTasks}
                            column="done"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAddTask={() => openModal('done')}
                            onDeleteTask={onDeleteTask}
                            onEditTask={onEditTask}
                        />
                    </div>
                </div>
            );
        }

        function KanbanColumn({ title, tasks, column, onDragStart, onDragEnd, onDragOver, onDrop, onAddTask, onDeleteTask, onEditTask }) {
            return (
                <div className="kanban-column" onDragOver={onDragOver} onDrop={(e) => onDrop(e, column)}>
                    <div className="kanban-header">
                        {title}
                        <span className="kanban-count">{tasks.length}</span>
                    </div>
                    <div className="task-list">
                        {tasks.map(task => (
                            <TaskCard
                                key={task.id}
                                task={task}
                                onDragStart={onDragStart}
                                onDragEnd={onDragEnd}
                                onDelete={onDeleteTask}
                                onEdit={onEditTask}
                            />
                        ))}
                    </div>
                    <button className="add-task-btn" onClick={onAddTask}>+ Add Task</button>
                </div>
            );
        }

        function TaskCard({ task, onDragStart, onDragEnd, onDelete, onEdit }) {
            const assigneeNames = { 'Y': 'You', 'B': 'Backend Dev', 'M': 'Mobile Dev', 'D': 'DevOps' };

            return (
                <div
                    className="task-card"
                    draggable="true"
                    onDragStart={(e) => onDragStart(e, task.id)}
                    onDragEnd={onDragEnd}
                >
                    <div className="task-actions">
                        <button className="task-action-btn" onClick={() => onEdit(task)} title="Edit">‚úèÔ∏è</button>
                        <button className="task-action-btn delete" onClick={() => onDelete(task.id)} title="Delete">üóëÔ∏è</button>
                    </div>
                    <div className="task-title">{task.title}</div>
                    {task.description && (
                        <div className="task-description">{task.description}</div>
                    )}
                    <div className="task-meta">
                        <span className={`task-priority priority-${task.priority}`}>
                            {task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                        </span>
                        <div className="task-assignee">
                            <div className="avatar">{task.assignee}</div>
                            <span>{assigneeNames[task.assignee]}</span>
                        </div>
                    </div>
                </div>
            );
        }

        function TechStackTab() {
            useEffect(() => {
                setTimeout(() => initializeTechChart(), 100);
            }, []);

            const techStacks = [
                {
                    title: 'üñ•Ô∏è Backend & ML',
                    items: [
                        { name: 'Python 3.11+', badge: 'Primary' },
                        { name: 'FastAPI', badge: 'Framework' },
                        { name: 'PostgreSQL 15+', badge: 'Database' },
                        { name: 'Redis 7+', badge: 'Cache' },
                        { name: 'Celery', badge: 'Jobs' },
                        { name: 'pandas, numpy, scikit-learn' },
                        { name: 'PyTorch 2.x', badge: 'Deep Learning' },
                        { name: 'skforecast', badge: 'SARIMAX' },
                        { name: 'TA-Lib', badge: 'Technical' }
                    ]
                },
                {
                    title: 'ü§ñ LLM & RAG',
                    items: [
                        { name: 'Gemma 3B', badge: 'Model' },
                        { name: 'transformers 4.x', badge: 'Hugging Face' },
                        { name: 'MLX', badge: 'Mac GPU' },
                        { name: 'LangChain 0.1+', badge: 'RAG' },
                        { name: 'Pinecone', badge: 'Vector DB' },
                        { name: 'sentence-transformers' },
                        { name: 'peft', badge: 'LoRA' },
                        { name: 'Hugging Face Inference', badge: 'Production' }
                    ]
                },
                {
                    title: 'üì± Mobile & Frontend',
                    items: [
                        { name: 'React Native', badge: 'Mobile' },
                        { name: 'Expo', badge: 'Build' },
                        { name: 'Next.js 14+', badge: 'Web' },
                        { name: 'TypeScript' },
                        { name: 'shadcn/ui + TailwindCSS' },
                        { name: 'React Query', badge: 'State' },
                        { name: 'TradingView Charts' },
                        { name: 'Zustand', badge: 'Local State' }
                    ]
                },
                {
                    title: '‚òÅÔ∏è Cloud & Infrastructure',
                    items: [
                        { name: 'AWS', badge: 'Cloud' },
                        { name: 'ECS Fargate', badge: 'Backend' },
                        { name: 'RDS PostgreSQL' },
                        { name: 'ElastiCache Redis' },
                        { name: 'S3', badge: 'Storage' },
                        { name: 'SageMaker', badge: 'LLM' },
                        { name: 'CloudFlare', badge: 'CDN' },
                        { name: 'Clerk', badge: 'Auth' }
                    ]
                },
                {
                    title: 'üîß DevOps & Tools',
                    items: [
                        { name: 'GitHub', badge: 'VCS' },
                        { name: 'GitHub Actions', badge: 'CI/CD' },
                        { name: 'Docker' },
                        { name: 'Sentry', badge: 'Errors' },
                        { name: 'PostHog', badge: 'Analytics' },
                        { name: 'pytest + Jest', badge: 'Testing' },
                        { name: 'VS Code + Copilot' }
                    ]
                },
                {
                    title: 'üíª Hardware',
                    items: [
                        { name: 'MacBook Air M5 16GB', badge: 'Dev' },
                        { name: '‚Çπ99,900', badge: 'Investment' },
                        { name: '2.74x faster than current' },
                        { name: 'MLX for local LLM testing' },
                        { name: '12-hour fine-tuning' },
                        { name: 'Portable development' }
                    ]
                }
            ];

            return (
                <div className="tab-content active">
                    <h2>Complete Tech Stack</h2>

                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '20px', marginTop: '20px'}}>
                        {techStacks.map((stack, idx) => (
                            <div className="tech-stack-card" key={idx}>
                                <h3>{stack.title}</h3>
                                <ul className="tech-list">
                                    {stack.items.map((item, i) => (
                                        <li key={i}>
                                            <span>{typeof item === 'string' ? item : item.name}</span>
                                            {typeof item === 'object' && item.badge && (
                                                <span className="tech-badge">{item.badge}</span>
                                            )}
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        ))}
                    </div>

                    <div className="chart-container">
                        <h2>Technology Distribution</h2>
                        <canvas id="techDistChart"></canvas>
                    </div>
                </div>
            );
        }

        function EconomicsTab() {
            useEffect(() => {
                setTimeout(() => initializeEconomicsCharts(), 100);
            }, []);

            return (
                <div className="tab-content active">
                    <h2>Project Economics & Scale</h2>

                    <div className="chart-container">
                        <h2>Cost Breakdown - First Year</h2>
                        <canvas id="costChart"></canvas>
                    </div>

                    <h3>Detailed Cost Structure by User Scale</h3>
                    
                    <table className="economics-table">
                        <thead>
                            <tr>
                                <th>Cost Item</th>
                                <th>Type</th>
                                <th>0-100 Users</th>
                                <th>500 Users</th>
                                <th>1K Users</th>
                                <th>5K Users</th>
                                <th>10K Users</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                <td colSpan="7"><strong>SUNK COSTS (One-Time Investment)</strong></td>
                            </tr>
                            <tr>
                                <td>MacBook M5 16GB</td>
                                <td>Sunk</td>
                                <td>‚Çπ99,900</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>Apple Developer Account</td>
                                <td>Sunk</td>
                                <td>‚Çπ8,250/yr</td>
                                <td>‚Çπ8,250/yr</td>
                                <td>‚Çπ8,250/yr</td>
                                <td>‚Çπ8,250/yr</td>
                                <td>‚Çπ8,250/yr</td>
                            </tr>
                            <tr>
                                <td>Google Play Console</td>
                                <td>Sunk</td>
                                <td>‚Çπ2,083 (one-time)</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>Domain & SSL Setup</td>
                                <td>Sunk</td>
                                <td>‚Çπ2,500</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                            </tr>
                            <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                <td colSpan="7"><strong>FIXED COSTS (Monthly - Independent of Users)</strong></td>
                            </tr>
                            <tr>
                                <td>Backend Hosting (Base)</td>
                                <td>Fixed</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                                <td>‚Çπ8,340</td>
                            </tr>
                            <tr>
                                <td>Database (RDS Base)</td>
                                <td>Fixed</td>
                                <td>‚Çπ1,080</td>
                                <td>‚Çπ1,080</td>
                                <td>‚Çπ1,080</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                            </tr>
                            <tr>
                                <td>Redis Cache (Base)</td>
                                <td>Fixed</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ2,500</td>
                            </tr>
                            <tr>
                                <td>Expo EAS Build</td>
                                <td>Fixed</td>
                                <td>‚Çπ2,420</td>
                                <td>‚Çπ2,420</td>
                                <td>‚Çπ2,420</td>
                                <td>‚Çπ2,420</td>
                                <td>‚Çπ2,420</td>
                            </tr>
                            <tr>
                                <td>Domain & Email</td>
                                <td>Fixed</td>
                                <td>‚Çπ1,250</td>
                                <td>‚Çπ1,250</td>
                                <td>‚Çπ1,250</td>
                                <td>‚Çπ1,250</td>
                                <td>‚Çπ1,250</td>
                            </tr>
                            <tr>
                                <td>CDN (Cloudflare)</td>
                                <td>Fixed</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ2,500</td>
                            </tr>
                            <tr>
                                <td>Monitoring (Sentry/PostHog)</td>
                                <td>Fixed</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                            </tr>
                            <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                <td colSpan="7"><strong>VARIABLE COSTS (Per User/Usage)</strong></td>
                            </tr>
                            <tr>
                                <td>LLM Inference (Gemma 3B)</td>
                                <td>Variable</td>
                                <td>‚Çπ0 (free tier)</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ5,000</td>
                                <td>‚Çπ20,840</td>
                                <td>‚Çπ41,700</td>
                            </tr>
                            <tr>
                                <td>Vector DB (Pinecone)</td>
                                <td>Variable</td>
                                <td>‚Çπ0 (free tier)</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                            </tr>
                            <tr>
                                <td>Storage (S3)</td>
                                <td>Variable</td>
                                <td>‚Çπ420</td>
                                <td>‚Çπ625</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                            </tr>
                            <tr>
                                <td>Bandwidth (Data Transfer)</td>
                                <td>Variable</td>
                                <td>‚Çπ210</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ4,170</td>
                                <td>‚Çπ8,340</td>
                            </tr>
                            <tr>
                                <td>Database I/O Operations</td>
                                <td>Variable</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ420</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ5,000</td>
                            </tr>
                            <tr>
                                <td>Push Notifications</td>
                                <td>Variable</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ210</td>
                                <td>‚Çπ420</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ3,340</td>
                            </tr>
                            <tr>
                                <td>SMS/Email (OTP)</td>
                                <td>Variable</td>
                                <td>‚Çπ420</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,250</td>
                                <td>‚Çπ4,170</td>
                                <td>‚Çπ8,340</td>
                            </tr>
                            <tr>
                                <td>Authentication (Clerk)</td>
                                <td>Variable</td>
                                <td>‚Çπ0 (free 10K)</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ835</td>
                            </tr>
                            <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                <td colSpan="7"><strong>SEMI-VARIABLE COSTS (Step Function)</strong></td>
                            </tr>
                            <tr>
                                <td>Customer Support Tools</td>
                                <td>Semi-Var</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ835</td>
                                <td>‚Çπ1,670</td>
                                <td>‚Çπ4,170</td>
                                <td>‚Çπ8,340</td>
                            </tr>
                            <tr>
                                <td>Payment Gateway Fees (2%)</td>
                                <td>Variable</td>
                                <td>‚Çπ0</td>
                                <td>‚Çπ3,000</td>
                                <td>‚Çπ6,000</td>
                                <td>‚Çπ30,000</td>
                                <td>‚Çπ60,000</td>
                            </tr>
                            <tr>
                                <td>Compliance & Legal</td>
                                <td>Fixed</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ2,500</td>
                                <td>‚Çπ4,170</td>
                                <td>‚Çπ8,340</td>
                                <td>‚Çπ12,500</td>
                            </tr>
                            <tr style={{background: '#d1fae5', fontWeight: 700}}>
                                <td><strong>TOTAL MONTHLY COST</strong></td>
                                <td>-</td>
                                <td><strong>‚Çπ11,635</strong></td>
                                <td><strong>‚Çπ18,680</strong></td>
                                <td><strong>‚Çπ30,270</strong></td>
                                <td><strong>‚Çπ100,820</strong></td>
                                <td><strong>‚Çπ177,065</strong></td>
                            </tr>
                            <tr style={{background: '#fef3c7', fontWeight: 700}}>
                                <td><strong>COST PER USER</strong></td>
                                <td>-</td>
                                <td><strong>-</strong></td>
                                <td><strong>‚Çπ37.36</strong></td>
                                <td><strong>‚Çπ30.27</strong></td>
                                <td><strong>‚Çπ20.16</strong></td>
                                <td><strong>‚Çπ17.71</strong></td>
                            </tr>
                            <tr style={{background: '#dbeafe', fontWeight: 700}}>
                                <td><strong>REVENUE (‚Çπ299/user)</strong></td>
                                <td>-</td>
                                <td><strong>‚Çπ0</strong></td>
                                <td><strong>‚Çπ1,49,500</strong></td>
                                <td><strong>‚Çπ2,99,000</strong></td>
                                <td><strong>‚Çπ14,95,000</strong></td>
                                <td><strong>‚Çπ29,90,000</strong></td>
                            </tr>
                            <tr style={{background: '#d1fae5', fontWeight: 700}}>
                                <td><strong>NET PROFIT</strong></td>
                                <td>-</td>
                                <td><strong>-‚Çπ11,635</strong></td>
                                <td><strong>‚Çπ1,30,820</strong></td>
                                <td><strong>‚Çπ2,68,730</strong></td>
                                <td><strong>‚Çπ13,94,180</strong></td>
                                <td><strong>‚Çπ28,12,935</strong></td>
                            </tr>
                            <tr style={{background: '#fef3c7', fontWeight: 700}}>
                                <td><strong>PROFIT MARGIN</strong></td>
                                <td>-</td>
                                <td><strong>-</strong></td>
                                <td><strong>87.5%</strong></td>
                                <td><strong>89.9%</strong></td>
                                <td><strong>93.3%</strong></td>
                                <td><strong>94.1%</strong></td>
                            </tr>
                        </tbody>
                    </table>

                    <div className="chart-container">
                        <h2>Revenue vs Costs by User Scale</h2>
                        <canvas id="revenueChart"></canvas>
                    </div>

                    <div className="chart-container">
                        <h2>Break-Even Analysis</h2>
                        <canvas id="breakEvenChart"></canvas>
                    </div>

                    <div className="roadmap-card">
                        <h3>Key Economic Insights</h3>
                        <ul>
                            <li><strong>Break-Even Point:</strong> ~40 paid users (Month 2-3)</li>
                            <li><strong>Economies of Scale:</strong> Cost per user drops from ‚Çπ37 to ‚Çπ18 at 10K users</li>
                            <li><strong>Profit Margin:</strong> Reaches 94% at 10K users</li>
                            <li><strong>Variable Cost Leader:</strong> LLM inference (‚Çπ41.7K at 10K users)</li>
                            <li><strong>Fixed Cost Efficiency:</strong> Only ‚Çπ25K/month in fixed costs</li>
                            <li><strong>Capital Efficiency:</strong> ‚Çπ1L investment generates ‚Çπ28L+ annual profit at scale</li>
                        </ul>
                    </div>

                    <div className="roadmap-card">
                        <h3>Pricing Strategy</h3>
                        <ul>
                            <li><strong>Free Tier:</strong> Basic portfolio tracking, limited signals (0-100 users)</li>
                            <li><strong>Starter:</strong> ‚Çπ299/month - FnO signals, 5 stock recommendations/month</li>
                            <li><strong>Pro:</strong> ‚Çπ999/month - Unlimited signals, ALGO models, priority support</li>
                            <li><strong>Elite:</strong> ‚Çπ2,999/month - Everything + personal robo-advisory, custom strategies</li>
                        </ul>
                    </div>
                </div>
            );
        }

        function TaskModal({ onClose, onSubmit, editingTask }) {
            const [formData, setFormData] = useState({
                title: editingTask?.title || '',
                description: editingTask?.description || '',
                priority: editingTask?.priority || 'high',
                assignee: editingTask?.assignee || 'Y'
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit(formData);
                setFormData({ title: '', description: '', priority: 'high', assignee: 'Y' });
            };

            return (
                <div className="modal active" onClick={(e) => e.target.className === 'modal active' && onClose()}>
                    <div className="modal-content">
                        <h2>{editingTask ? 'Edit Task' : 'Add New Task'}</h2>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label>Task Title *</label>
                                <input
                                    type="text"
                                    value={formData.title}
                                    onChange={(e) => setFormData({...formData, title: e.target.value})}
                                    required
                                />
                            </div>
                            <div className="form-group">
                                <label>Description</label>
                                <textarea
                                    rows="3"
                                    value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})}
                                />
                            </div>
                            <div className="form-group">
                                <label>Priority *</label>
                                <select
                                    value={formData.priority}
                                    onChange={(e) => setFormData({...formData, priority: e.target.value})}
                                    required
                                >
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>Assignee *</label>
                                <select
                                    value={formData.assignee}
                                    onChange={(e) => setFormData({...formData, assignee: e.target.value})}
                                    required
                                >
                                    <option value="Y">You</option>
                                    <option value="B">Backend Dev</option>
                                    <option value="M">Mobile Dev</option>
                                    <option value="D">DevOps</option>
                                </select>
                            </div>
                            <div className="btn-group">
                                <button type="submit" className="btn btn-primary">
                                    {editingTask ? 'Update Task' : 'Add Task'}
                                </button>
                                <button type="button" className="btn btn-secondary" onClick={onClose}>Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Default Tasks
        function getDefaultTasks() {
            return [
                { id: '1', sprint: 1, column: 'todo', title: 'Purchase & Setup MacBook M5 16GB', description: 'Hardware procurement and development environment setup', priority: 'high', assignee: 'Y' },
                { id: '2', sprint: 1, column: 'todo', title: 'FastAPI Backend Skeleton', description: 'Setup FastAPI project structure, PostgreSQL connection', priority: 'high', assignee: 'B' },
                { id: '3', sprint: 1, column: 'todo', title: 'Authentication System (Clerk)', description: 'Integrate Clerk for user auth, JWT tokens', priority: 'high', assignee: 'B' },
                { id: '4', sprint: 1, column: 'todo', title: 'AWS Infrastructure Setup', description: 'RDS, ElastiCache, S3, ECS Fargate', priority: 'medium', assignee: 'D' },
                { id: '5', sprint: 1, column: 'todo', title: 'CI/CD Pipeline (GitHub Actions)', description: 'Automated testing and deployment', priority: 'medium', assignee: 'D' },
                { id: '6', sprint: 1, column: 'todo', title: 'Database Schema Design', description: 'Users, portfolios, stocks, transactions tables', priority: 'high', assignee: 'Y' },
                { id: '7', sprint: 2, column: 'todo', title: 'Stock Data Pipeline (NSE API)', description: 'Real-time and historical data fetching', priority: 'high', assignee: 'Y' },
                { id: '8', sprint: 2, column: 'todo', title: 'FnO Data Collection (Options Chain)', description: 'NIFTY/BANKNIFTY options data', priority: 'high', assignee: 'Y' },
                { id: '9', sprint: 2, column: 'todo', title: 'PCR (Put-Call Ratio) Calculator', description: 'Real-time PCR signals with Z-score', priority: 'high', assignee: 'Y' },
                { id: '10', sprint: 2, column: 'todo', title: 'Open Interest Analysis', description: 'OI change tracking, buildup patterns', priority: 'high', assignee: 'Y' },
            ];
        }

        // Chart functions
        function initializeCharts() {
            const progressCtx = document.getElementById('progressChart');
            if (progressCtx && !progressCtx.chart) {
                progressCtx.chart = new Chart(progressCtx, {
                    type: 'line',
                    data: {
                        labels: ['Sprint 1', 'Sprint 2', 'Sprint 3', 'Sprint 4', 'Sprint 5', 'Sprint 6'],
                        datasets: [{
                            label: 'Planned Progress',
                            data: [17, 33, 50, 67, 83, 100],
                            borderColor: 'rgba(37, 99, 235, 1)',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Actual Progress',
                            data: [0, 0, 0, 0, 0, 0],
                            borderColor: 'rgba(16, 185, 129, 1)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: { beginAtZero: true, max: 100 }
                        }
                    }
                });
            }

            const categoryCtx = document.getElementById('categoryChart');
            if (categoryCtx && !categoryCtx.chart) {
                categoryCtx.chart = new Chart(categoryCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Backend/ML', 'LLM/RAG', 'Mobile', 'DevOps', 'Testing'],
                        datasets: [{
                            data: [30, 20, 35, 10, 5],
                            backgroundColor: [
                                'rgba(37, 99, 235, 0.8)',
                                'rgba(139, 92, 246, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ]
                        }]
                    },
                    options: { responsive: true }
                });
            }
        }

        function initializeGanttChart() {
            const ganttCtx = document.getElementById('ganttChart');
            if (ganttCtx && !ganttCtx.chart) {
                ganttCtx.chart = new Chart(ganttCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Foundation', 'Quant+FnO', 'Algo Models', 'LLM/RAG', 'Mobile', 'Launch'],
                        datasets: [{
                            label: 'Duration (weeks)',
                            data: [4, 4, 4, 4, 4, 4],
                            backgroundColor: [
                                'rgba(37, 99, 235, 0.7)',
                                'rgba(16, 185, 129, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(245, 158, 11, 0.7)',
                                'rgba(6, 182, 212, 0.7)',
                                'rgba(239, 68, 68, 0.7)'
                            ]
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true
                    }
                });
            }
        }

        function initializeTechChart() {
            const techDistCtx = document.getElementById('techDistChart');
            if (techDistCtx && !techDistCtx.chart) {
                techDistCtx.chart = new Chart(techDistCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Backend', 'LLM/AI', 'Mobile', 'Cloud', 'DevOps', 'Database'],
                        datasets: [{
                            label: 'Technology Coverage',
                            data: [90, 85, 80, 75, 70, 95],
                            fill: true,
                            backgroundColor: 'rgba(37, 99, 235, 0.2)',
                            borderColor: 'rgba(37, 99, 235, 1)',
                            pointBackgroundColor: 'rgba(37, 99, 235, 1)'
                        }]
                    },
                    options: {
                        scales: {
                            r: { beginAtZero: true, max: 100 }
                        }
                    }
                });
            }
        }

        function initializeEconomicsCharts() {
            const costCtx = document.getElementById('costChart');
            if (costCtx && !costCtx.chart) {
                costCtx.chart = new Chart(costCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Hardware', 'Hosting', 'LLM', 'Mobile', 'Database', 'Other'],
                        datasets: [{
                            label: 'Year 1 Costs (‚Çπ)',
                            data: [99900, 50040, 100080, 29730, 25020, 22675],
                            backgroundColor: [
                                'rgba(37, 99, 235, 0.7)',
                                'rgba(16, 185, 129, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(245, 158, 11, 0.7)',
                                'rgba(6, 182, 212, 0.7)',
                                'rgba(239, 68, 68, 0.7)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: { y: { beginAtZero: true } }
                    }
                });
            }

            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx && !revenueCtx.chart) {
                revenueCtx.chart = new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['0', '100', '500', '1K', '5K', '10K'],
                        datasets: [{
                            label: 'Monthly Costs (‚Çπ)',
                            data: [11635, 11635, 18680, 30270, 100820, 177065],
                            borderColor: 'rgba(239, 68, 68, 1)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Monthly Revenue (‚Çπ)',
                            data: [0, 0, 149500, 299000, 1495000, 2990000],
                            borderColor: 'rgba(16, 185, 129, 1)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: { y: { beginAtZero: true } }
                    }
                });
            }

            const breakEvenCtx = document.getElementById('breakEvenChart');
            if (breakEvenCtx && !breakEvenCtx.chart) {
                breakEvenCtx.chart = new Chart(breakEvenCtx, {
                    type: 'line',
                    data: {
                        labels: ['0', '20', '40', '60', '100', '200', '500'],
                        datasets: [{
                            label: 'Monthly Costs',
                            data: [11635, 11635, 11635, 12500, 13500, 15000, 18680],
                            borderColor: 'rgba(239, 68, 68, 1)',
                            fill: false,
                            tension: 0.4
                        }, {
                            label: 'Monthly Revenue',
                            data: [0, 5980, 11960, 17940, 29900, 59800, 149500],
                            borderColor: 'rgba(16, 185, 129, 1)',
                            fill: false,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Break-even at ~40 paid users'
                            }
                        }
                    }
                });
            }
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>