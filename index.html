<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fintelligence MVP - Complete Dashboard</title>
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #2563eb; --primary-dark: #1e40af; --success: #10b981; --warning: #f59e0b;
            --danger: #ef4444; --info: #06b6d4; --purple: #8b5cf6;
            --gray-100: #f3f4f6; --gray-200: #e5e7eb; --gray-300: #d1d5db; --gray-600: #4b5563;
            --gray-700: #374151; --gray-800: #1f2937; --bg-primary: #ffffff; --bg-secondary: #f9fafb;
            --text-primary: #111827; --text-secondary: #4b5563; --border: #e5e7eb;
        }
        
        [data-theme="dark"] {
            --bg-primary: #1f2937; --bg-secondary: #111827; --text-primary: #f9fafb;
            --text-secondary: #d1d5db; --border: #374151;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px; transition: background 0.3s;
        }
        
        [data-theme="dark"] body { background: linear-gradient(135deg, #1e3a8a 0%, #581c87 100%); }
        
        .container {
            max-width: 1800px; margin: 0 auto; background: var(--bg-primary);
            border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 30px; text-align: center; position: relative;
        }
        
        .header h1 { font-size: 2.5em; font-weight: 700; margin-bottom: 10px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        
        .theme-toggle {
            position: absolute; top: 30px; right: 30px; background: rgba(255,255,255,0.2);
            border: none; padding: 12px 16px; border-radius: 50px; cursor: pointer;
            font-size: 1.3em; transition: all 0.3s; backdrop-filter: blur(10px);
        }
        
        .theme-toggle:hover { background: rgba(255,255,255,0.3); transform: scale(1.1) rotate(180deg); }
        
        .nav-tabs {
            display: flex; background: var(--bg-secondary); border-bottom: 2px solid var(--border);
            overflow-x: auto;
        }
        
        .nav-tab {
            padding: 16px 28px; cursor: pointer; border: none; background: transparent;
            font-size: 16px; font-weight: 600; color: var(--text-secondary);
            white-space: nowrap; position: relative; transition: all 0.3s;
        }
        
        .nav-tab::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 3px;
            background: var(--primary); transition: width 0.3s;
        }
        
        .nav-tab:hover { background: var(--bg-primary); color: var(--text-primary); }
        .nav-tab:hover::after { width: 100%; }
        .nav-tab.active { background: var(--bg-primary); color: var(--primary); }
        .nav-tab.active::after { width: 100%; }
        
        .tab-content { display: none; padding: 30px; color: var(--text-primary); }
        .tab-content.active { display: block; }
        
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white; padding: 25px; border-radius: 12px;
            box-shadow: 0 4px 12px rgba(37,99,235,0.3); transition: all 0.3s;
        }
        
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(37,99,235,0.4); }
        .stat-card h3 { font-size: 0.9em; opacity: 0.9; margin-bottom: 10px; text-transform: uppercase; }
        .stat-card .value { font-size: 2.5em; font-weight: 700; margin-bottom: 5px; }
        .stat-card .subtitle { font-size: 0.85em; opacity: 0.8; }
        
        .kanban-board, .tech-stack-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px;
        }
        
        .kanban-column, .tech-stack-card {
            background: var(--bg-secondary); border-radius: 12px; padding: 20px;
            min-height: 400px; border: 1px solid var(--border); transition: all 0.3s;
        }
        
        .kanban-header, .tech-stack-header {
            font-weight: 700; font-size: 1.1em; margin-bottom: 15px; padding-bottom: 10px;
            border-bottom: 3px solid var(--border); display: flex; justify-content: space-between;
            align-items: center; color: var(--text-primary);
        }
        
        .tech-stack-header h3 { color: var(--primary); font-size: 1.3em; }
        
        .header-actions { display: flex; gap: 6px; }
        
        .header-btn {
            background: var(--primary); border: none; color: white; width: 26px; height: 26px;
            border-radius: 5px; cursor: pointer; font-size: 0.85em; transition: all 0.2s;
        }
        
        .header-btn:hover { transform: scale(1.1); }
        .header-btn.delete { background: var(--danger); }
        
        .kanban-count {
            background: var(--gray-700); color: white; padding: 4px 12px;
            border-radius: 12px; font-size: 0.85em;
        }
        
        .task-card, .tech-item-card {
            background: var(--bg-primary); padding: 15px; border-radius: 8px; margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1); cursor: move; transition: all 0.3s;
            border: 1px solid var(--border); position: relative;
        }
        
        .task-card:hover, .tech-item-card:hover { 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-2px); 
        }
        
        .task-card.dragging { opacity: 0.5; transform: rotate(3deg); }
        
        .task-actions, .item-actions {
            position: absolute; top: 10px; right: 10px; display: flex; gap: 5px;
            opacity: 0; transition: opacity 0.3s; z-index: 10;
        }
        
        .task-card:hover .task-actions, .tech-item-card:hover .item-actions { opacity: 1; }
        
        .task-action-btn, .item-action-btn {
            background: var(--primary); border: none; color: white; width: 28px; height: 28px;
            border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.2s;
        }
        
        .task-action-btn:hover, .item-action-btn:hover { transform: scale(1.15); }
        .task-action-btn.delete, .item-action-btn.delete { background: var(--danger); }
        
        .task-title {
            font-weight: 600; margin-bottom: 8px; color: var(--text-primary);
            padding-right: 70px; font-size: 1em;
        }
        
        .task-description, .item-name {
            font-size: 0.85em; color: var(--text-secondary); margin-bottom: 10px;
        }
        
        .task-meta {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85em; color: var(--text-secondary); margin-top: 10px;
        }
        
        .task-priority {
            padding: 4px 10px; border-radius: 6px; font-size: 0.8em; font-weight: 600;
        }
        
        .priority-high { background: #fee2e2; color: var(--danger); }
        .priority-medium { background: #fef3c7; color: var(--warning); }
        .priority-low { background: #dbeafe; color: var(--info); }
        
        .task-assignee { display: flex; align-items: center; gap: 6px; }
        
        .avatar {
            width: 26px; height: 26px; border-radius: 50%; background: var(--primary);
            color: white; display: flex; align-items: center; justify-content: center;
            font-size: 0.75em; font-weight: 700;
        }
        
        .add-task-btn, .add-item-btn, .add-section-btn {
            background: var(--primary); color: white; border: none; padding: 12px;
            border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;
            margin-top: 15px; transition: all 0.3s;
        }
        
        .add-task-btn:hover, .add-item-btn:hover {
            background: var(--primary-dark); transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37,99,235,0.3);
        }
        
        .add-section-btn {
            background: var(--success); margin: 20px 0;
        }
        
        .add-section-btn:hover { background: #059669; }
        
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1000; align-items: center;
            justify-content: center; backdrop-filter: blur(5px);
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background: var(--bg-primary); padding: 30px; border-radius: 16px;
            max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .modal-content h2 { color: var(--text-primary); margin-bottom: 20px; font-size: 1.5em; }
        
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block; font-weight: 600; margin-bottom: 8px;
            color: var(--text-primary); font-size: 0.95em;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px;
            font-size: 14px; background: var(--bg-secondary); color: var(--text-primary);
            font-family: inherit; transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none; border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
        }
        
        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        .btn {
            flex: 1; padding: 12px; border: none; border-radius: 8px;
            font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.95em;
        }
        
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-secondary { background: var(--gray-300); color: var(--text-primary); }
        .btn-secondary:hover { background: var(--gray-600); color: white; }
        
        .progress-bar {
            background: var(--gray-200); border-radius: 8px; height: 32px;
            margin: 20px 0; overflow: hidden; position: relative;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--success) 0%, #14b8a6 100%);
            height: 100%; transition: width 0.8s; display: flex; align-items: center;
            justify-content: center; color: white; font-weight: 700; font-size: 0.9em;
        }
        
        .save-indicator {
            position: fixed; bottom: 20px; right: 20px; background: var(--success);
            color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600;
            opacity: 0; transition: opacity 0.3s; z-index: 1001;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }
        
        .save-indicator.show { opacity: 1; }
        
        .chart-container {
            background: var(--bg-primary); padding: 25px; border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 30px;
            border: 1px solid var(--border); transition: all 0.3s;
        }
        
        .chart-container h2 { margin-bottom: 20px; color: var(--text-primary); font-size: 1.5em; }
        
        .charts-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 20px;
            margin-top: 30px;
        }
        
        .roadmap-card {
            background: var(--bg-primary); padding: 20px; border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 15px;
            border: 1px solid var(--border); transition: all 0.3s;
        }
        
        .roadmap-phase {
            display: flex; align-items: center; gap: 20px; margin-bottom: 15px;
        }
        
        .phase-number {
            width: 52px; height: 52px; border-radius: 50%; background: var(--primary);
            color: white; display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 1.3em; flex-shrink: 0;
        }
        
        .phase-title { font-weight: 700; font-size: 1.2em; color: var(--text-primary); }
        .phase-duration { color: var(--text-secondary); font-size: 0.9em; }
        
        .tech-list { list-style: none; }
        
        .tech-badge {
            background: var(--primary); color: white; padding: 4px 10px;
            border-radius: 12px; font-size: 0.75em; font-weight: 600; margin-left: 8px;
        }
        
        .economics-table {
            width: 100%; border-collapse: collapse; margin-top: 20px;
        }
        
        .economics-table th, .economics-table td {
            padding: 12px; text-align: left; border-bottom: 1px solid var(--border);
            color: var(--text-primary); position: relative; font-size: 0.9em;
        }
        
        .economics-table th {
            background: var(--bg-secondary); font-weight: 700; font-size: 0.85em;
        }
        
        .economics-table tr:hover { background: var(--bg-secondary); }
        .economics-table tr:hover .row-actions { opacity: 1; }
        
        .row-actions {
            position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
            display: flex; gap: 4px; opacity: 0; transition: opacity 0.3s;
        }
        
        .row-action-btn {
            background: var(--primary); border: none; color: white;
            width: 22px; height: 22px; border-radius: 4px; cursor: pointer;
            font-size: 0.7em; transition: all 0.2s;
        }
        
        .row-action-btn:hover { transform: scale(1.15); }
        .row-action-btn.delete { background: var(--danger); }
        
        .revenue-card {
            background: var(--bg-primary); padding: 20px; border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1); margin-bottom: 15px;
            border-left: 4px solid var(--success); transition: all 0.3s;
        }
        
        .revenue-card:hover { transform: translateX(5px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        
        .revenue-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;
        }
        
        .revenue-tier { font-weight: 700; font-size: 1.1em; color: var(--text-primary); }
        .revenue-amount { font-size: 1.3em; font-weight: 700; color: var(--success); }
        
        .loading { text-align: center; padding: 60px; color: var(--text-secondary); }
        .spinner {
            border: 4px solid var(--border); border-top: 4px solid var(--primary);
            border-radius: 50%; width: 50px; height: 50px;
            animation: spin 1s linear infinite; margin: 0 auto 20px;
        }
        
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 768px) {
            .kanban-board, .tech-stack-grid, .charts-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.8em; }
            .nav-tab { padding: 12px 20px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div class="save-indicator" id="saveIndicator">üíæ Auto-Saved!</div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Database Manager (keeping the same as before)
        class DBManager {
            constructor() {
                this.dbName = 'FintelligenceDB';
                this.version = 2;
                this.db = null;
                this.useLocalStorage = false;
            }

            async init() {
                try {
                    if (!window.indexedDB) throw new Error('IndexedDB not supported');
                    return new Promise((resolve) => {
                        const request = indexedDB.open(this.dbName, this.version);
                        request.onerror = () => { this.useLocalStorage = true; resolve(true); };
                        request.onsuccess = () => { this.db = request.result; resolve(this.db); };
                        request.onupgradeneeded = (event) => {
                            const db = event.target.result;
                            const stores = ['tasks', 'settings', 'techStacks', 'techItems', 'costs', 'revenue'];
                            stores.forEach(store => {
                                if (!db.objectStoreNames.contains(store)) {
                                    db.createObjectStore(store, { keyPath: 'id' });
                                }
                            });
                        };
                    });
                } catch (error) {
                    this.useLocalStorage = true;
                    return Promise.resolve(true);
                }
            }

            async saveData(storeName, data) {
                if (this.useLocalStorage) {
                    localStorage.setItem(`fintelligence_${storeName}`, JSON.stringify(data));
                    return Promise.resolve();
                }
                try {
                    const transaction = this.db.transaction([storeName], 'readwrite');
                    const store = transaction.objectStore(storeName);
                    await store.clear();
                    for (const item of data) await store.put(item);
                    return transaction.complete;
                } catch (error) {
                    return Promise.resolve();
                }
            }

            async getData(storeName) {
                if (this.useLocalStorage) {
                    const data = localStorage.getItem(`fintelligence_${storeName}`);
                    return Promise.resolve(data ? JSON.parse(data) : []);
                }
                try {
                    const transaction = this.db.transaction([storeName], 'readonly');
                    const store = transaction.objectStore(storeName);
                    const request = store.getAll();
                    return new Promise((resolve) => {
                        request.onsuccess = () => resolve(request.result || []);
                        request.onerror = () => resolve([]);
                    });
                } catch (error) {
                    return Promise.resolve([]);
                }
            }

            async saveSetting(key, value) {
                if (this.useLocalStorage) {
                    localStorage.setItem(`fintelligence_${key}`, JSON.stringify(value));
                    return Promise.resolve();
                }
                try {
                    const transaction = this.db.transaction(['settings'], 'readwrite');
                    const store = transaction.objectStore('settings');
                    await store.put({ key, value });
                    return transaction.complete;
                } catch (error) {
                    return Promise.resolve();
                }
            }

            async getSetting(key) {
                if (this.useLocalStorage) {
                    const data = localStorage.getItem(`fintelligence_${key}`);
                    return Promise.resolve(data ? JSON.parse(data) : null);
                }
                try {
                    const transaction = this.db.transaction(['settings'], 'readonly');
                    const store = transaction.objectStore('settings');
                    const request = store.get(key);
                    return new Promise((resolve) => {
                        request.onsuccess = () => resolve(request.result?.value);
                        request.onerror = () => resolve(null);
                    });
                } catch (error) {
                    return Promise.resolve(null);
                }
            }
        }

        const dbManager = new DBManager();

        // Helper function to calculate totals
        const calculateCostTotal = (costs, userTier) => {
            const tierMap = {
                '0-100': 'cost0_100',
                '100-500': 'cost100_500',
                '500-1000': 'cost500_1k',
                '1000-2500': 'cost1k_2500',
                '2500-5000': 'cost2500_5k',
                '5000-10000': 'cost5k_10k',
                '10000+': 'cost10k'
            };
            
            const field = tierMap[userTier];
            return costs.reduce((sum, cost) => {
                const value = cost[field] || '0';
                const numValue = parseFloat(value.replace(/[‚Çπ,]/g, '')) || 0;
                return sum + numValue;
            }, 0);
        };

        // Main App Component
        function App() {
            const [theme, setTheme] = useState('light');
            const [activeTab, setActiveTab] = useState('overview');
            const [tasks, setTasks] = useState([]);
            const [techStacks, setTechStacks] = useState([]);
            const [techItems, setTechItems] = useState([]);
            const [costs, setCosts] = useState([]);
            const [revenue, setRevenue] = useState([]);
            const [loading, setLoading] = useState(true);
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState('task');
            const [editingItem, setEditingItem] = useState(null);
            const [currentSprint, setCurrentSprint] = useState(1);
            const [currentColumn, setCurrentColumn] = useState('todo');
            const [currentStackId, setCurrentStackId] = useState(null);

            useEffect(() => {
                initializeApp();
            }, []);

            const initializeApp = async () => {
                try {
                    await dbManager.init();
                    
                    const savedTheme = await dbManager.getSetting('theme');
                    if (savedTheme) {
                        setTheme(savedTheme);
                        document.documentElement.setAttribute('data-theme', savedTheme);
                    }

                    const savedTasks = await dbManager.getData('tasks');
                    const savedStacks = await dbManager.getData('techStacks');
                    const savedItems = await dbManager.getData('techItems');
                    const savedCosts = await dbManager.getData('costs');
                    const savedRevenue = await dbManager.getData('revenue');

                    setTasks(savedTasks.length > 0 ? savedTasks : getDefaultTasks());
                    setTechStacks(savedStacks.length > 0 ? savedStacks : getDefaultTechStacks());
                    setTechItems(savedItems.length > 0 ? savedItems : getDefaultTechItems());
                    setCosts(savedCosts.length > 0 ? savedCosts : getDefaultCosts());
                    setRevenue(savedRevenue.length > 0 ? savedRevenue : getDefaultRevenue());

                    setLoading(false);
                } catch (error) {
                    setLoading(false);
                    setTasks(getDefaultTasks());
                    setTechStacks(getDefaultTechStacks());
                    setTechItems(getDefaultTechItems());
                    setCosts(getDefaultCosts());
                    setRevenue(getDefaultRevenue());
                }
            };

            const toggleTheme = async () => {
                const newTheme = theme === 'light' ? 'dark' : 'light';
                setTheme(newTheme);
                document.documentElement.setAttribute('data-theme', newTheme);
                await dbManager.saveSetting('theme', newTheme);
                showSaveIndicator();
            };

            const showSaveIndicator = () => {
                const indicator = document.getElementById('saveIndicator');
                if (indicator) {
                    indicator.classList.add('show');
                    setTimeout(() => indicator.classList.remove('show'), 2000);
                }
            };

            const saveAndUpdate = async (dataType, data) => {
                await dbManager.saveData(dataType, data);
                showSaveIndicator();
            };

            // Task operations (keeping same as before)
            const moveTask = async (taskId, toColumn, sprint) => {
                const newTasks = tasks.map(task => {
                    if (task.id === taskId && task.sprint === sprint) {
                        return { ...task, column: toColumn };
                    }
                    return task;
                });
                setTasks(newTasks);
                await saveAndUpdate('tasks', newTasks);
            };

            const addTask = async (taskData) => {
                const newTask = {
                    id: Date.now().toString(),
                    ...taskData,
                    sprint: currentSprint,
                    column: currentColumn
                };
                const newTasks = [...tasks, newTask];
                setTasks(newTasks);
                await saveAndUpdate('tasks', newTasks);
                setShowModal(false);
            };

            const updateTask = async (taskId, taskData) => {
                const newTasks = tasks.map(task => 
                    task.id === taskId ? { ...task, ...taskData } : task
                );
                setTasks(newTasks);
                await saveAndUpdate('tasks', newTasks);
                setShowModal(false);
                setEditingItem(null);
            };

            const deleteTask = async (taskId) => {
                if (confirm('Delete this task?')) {
                    const newTasks = tasks.filter(task => task.id !== taskId);
                    setTasks(newTasks);
                    await saveAndUpdate('tasks', newTasks);
                }
            };

            // Tech stack operations
            const addTechStack = async (stackData) => {
                const newStack = { id: Date.now().toString(), ...stackData };
                const newStacks = [...techStacks, newStack];
                setTechStacks(newStacks);
                await saveAndUpdate('techStacks', newStacks);
                setShowModal(false);
            };

            const updateTechStack = async (stackId, stackData) => {
                const newStacks = techStacks.map(s => s.id === stackId ? { ...s, ...stackData } : s);
                setTechStacks(newStacks);
                await saveAndUpdate('techStacks', newStacks);
                setShowModal(false);
                setEditingItem(null);
            };

            const deleteTechStack = async (stackId) => {
                if (confirm('Delete this tech stack and all items?')) {
                    const newStacks = techStacks.filter(s => s.id !== stackId);
                    const newItems = techItems.filter(i => i.stackId !== stackId);
                    setTechStacks(newStacks);
                    setTechItems(newItems);
                    await saveAndUpdate('techStacks', newStacks);
                    await saveAndUpdate('techItems', newItems);
                }
            };

            const addTechItem = async (itemData) => {
                const newItem = { id: Date.now().toString(), ...itemData, stackId: currentStackId };
                const newItems = [...techItems, newItem];
                setTechItems(newItems);
                await saveAndUpdate('techItems', newItems);
                setShowModal(false);
            };

            const updateTechItem = async (itemId, itemData) => {
                const newItems = techItems.map(i => i.id === itemId ? { ...i, ...itemData } : i);
                setTechItems(newItems);
                await saveAndUpdate('techItems', newItems);
                setShowModal(false);
                setEditingItem(null);
            };

            const deleteTechItem = async (itemId) => {
                if (confirm('Delete this item?')) {
                    const newItems = techItems.filter(i => i.id !== itemId);
                    setTechItems(newItems);
                    await saveAndUpdate('techItems', newItems);
                }
            };

            // Cost operations
            const addCost = async (costData) => {
                const newCost = { id: Date.now().toString(), ...costData };
                const newCosts = [...costs, newCost];
                setCosts(newCosts);
                await saveAndUpdate('costs', newCosts);
                setShowModal(false);
            };

            const updateCost = async (costId, costData) => {
                const newCosts = costs.map(c => c.id === costId ? { ...c, ...costData } : c);
                setCosts(newCosts);
                await saveAndUpdate('costs', newCosts);
                setShowModal(false);
                setEditingItem(null);
            };

            const deleteCost = async (costId) => {
                if (confirm('Delete this cost item?')) {
                    const newCosts = costs.filter(c => c.id !== costId);
                    setCosts(newCosts);
                    await saveAndUpdate('costs', newCosts);
                }
            };

            // Revenue operations
            const addRevenue = async (revenueData) => {
                const newRevenue = { id: Date.now().toString(), ...revenueData };
                const newRevenueItems = [...revenue, newRevenue];
                setRevenue(newRevenueItems);
                await saveAndUpdate('revenue', newRevenueItems);
                setShowModal(false);
            };

            const updateRevenue = async (revenueId, revenueData) => {
                const newRevenueItems = revenue.map(r => r.id === revenueId ? { ...r, ...revenueData } : r);
                setRevenue(newRevenueItems);
                await saveAndUpdate('revenue', newRevenueItems);
                setShowModal(false);
                setEditingItem(null);
            };

            const deleteRevenue = async (revenueId) => {
                if (confirm('Delete this revenue tier?')) {
                    const newRevenueItems = revenue.filter(r => r.id !== revenueId);
                    setRevenue(newRevenueItems);
                    await saveAndUpdate('revenue', newRevenueItems);
                }
            };

            const openModal = (type, item = null, extra = {}) => {
                setModalType(type);
                setEditingItem(item);
                if (extra.sprint) setCurrentSprint(extra.sprint);
                if (extra.column) setCurrentColumn(extra.column);
                if (extra.stackId) setCurrentStackId(extra.stackId);
                setShowModal(true);
            };

            const handleSubmit = (data) => {
                if (modalType === 'task') {
                    editingItem ? updateTask(editingItem.id, data) : addTask(data);
                } else if (modalType === 'techStack') {
                    editingItem ? updateTechStack(editingItem.id, data) : addTechStack(data);
                } else if (modalType === 'techItem') {
                    editingItem ? updateTechItem(editingItem.id, data) : addTechItem(data);
                } else if (modalType === 'cost') {
                    editingItem ? updateCost(editingItem.id, data) : addCost(data);
                } else if (modalType === 'revenue') {
                    editingItem ? updateRevenue(editingItem.id, data) : addRevenue(data);
                }
            };

            if (loading) {
                return (
                    <div className="container">
                        <div className="loading">
                            <div className="spinner"></div>
                            <p>Loading Fintelligence MVP Dashboard...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <Header theme={theme} onToggleTheme={toggleTheme} />
                    <Navigation activeTab={activeTab} onTabChange={setActiveTab} />
                    
                    {activeTab === 'overview' && <OverviewTab tasks={tasks} />}
                    {activeTab === 'roadmap' && <RoadmapTab tasks={tasks} />}
                    {activeTab.startsWith('sprint') && (
                        <SprintTab
                            sprint={parseInt(activeTab.replace('sprint', ''))}
                            tasks={tasks}
                            onMoveTask={moveTask}
                            onDelete={deleteTask}
                            onEdit={(task) => openModal('task', task)}
                            onAdd={(sprint, column) => openModal('task', null, { sprint, column })}
                        />
                    )}
                    {activeTab === 'techstack' && (
                        <TechStackTab
                            techStacks={techStacks}
                            techItems={techItems}
                            onAddStack={() => openModal('techStack')}
                            onEditStack={(stack) => openModal('techStack', stack)}
                            onDeleteStack={deleteTechStack}
                            onAddItem={(stackId) => openModal('techItem', null, { stackId })}
                            onEditItem={(item) => openModal('techItem', item)}
                            onDeleteItem={deleteTechItem}
                        />
                    )}
                    {activeTab === 'economics' && (
                        <EconomicsTab
                            costs={costs}
                            revenue={revenue}
                            onAddCost={() => openModal('cost')}
                            onEditCost={(cost) => openModal('cost', cost)}
                            onDeleteCost={deleteCost}
                            onAddRevenue={() => openModal('revenue')}
                            onEditRevenue={(rev) => openModal('revenue', rev)}
                            onDeleteRevenue={deleteRevenue}
                        />
                    )}

                    {showModal && (
                        <UniversalModal
                            type={modalType}
                            item={editingItem}
                            onClose={() => {
                                setShowModal(false);
                                setEditingItem(null);
                            }}
                            onSubmit={handleSubmit}
                        />
                    )}
                </div>
            );
        }

        // Header Component
        function Header({ theme, onToggleTheme }) {
            return (
                <div className="header">
                    <button className="theme-toggle" onClick={onToggleTheme}>
                        {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}
                    </button>
                    <h1>üöÄ Fintelligence MVP</h1>
                    <p>Ultimate Enterprise Dashboard with Dynamic Economics</p>
                </div>
            );
        }

        // Navigation Component
        function Navigation({ activeTab, onTabChange }) {
            const tabs = [
                { id: 'overview', label: 'üìä Overview' },
                { id: 'roadmap', label: 'üó∫Ô∏è Roadmap' },
                { id: 'sprint1', label: 'Sprint 1' },
                { id: 'sprint2', label: 'Sprint 2' },
                { id: 'sprint3', label: 'Sprint 3' },
                { id: 'sprint4', label: 'Sprint 4' },
                { id: 'sprint5', label: 'Sprint 5' },
                { id: 'sprint6', label: 'Sprint 6' },
                { id: 'techstack', label: 'üíª Tech Stack' },
                { id: 'economics', label: 'üí∞ Economics' }
            ];

            return (
                <div className="nav-tabs">
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            className={`nav-tab ${activeTab === tab.id ? 'active' : ''}`}
                            onClick={() => onTabChange(tab.id)}
                        >
                            {tab.label}
                        </button>
                    ))}
                </div>
            );
        }

        // Overview Tab Component
        function OverviewTab({ tasks }) {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(t => t.column === 'done').length;
            const inProgressTasks = tasks.filter(t => t.column === 'inprogress').length;
            const progress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            useEffect(() => {
                setTimeout(() => {
                    const ctx = document.getElementById('overviewChart');
                    if (ctx && !ctx.chart) {
                        ctx.chart = new Chart(ctx, {
                            type: 'doughnut',
                            data: {
                                labels: ['Completed', 'In Progress', 'To Do'],
                                datasets: [{
                                    data: [completedTasks, inProgressTasks, totalTasks - completedTasks - inProgressTasks],
                                    backgroundColor: ['#10b981', '#f59e0b', '#e5e7eb']
                                }]
                            },
                            options: { responsive: true }
                        });
                    }
                }, 100);
            }, []);

            return (
                <div className="tab-content active">
                    <h2>Project Overview</h2>
                    
                    <div className="stats-grid">
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)'}}>
                            <h3>Total Progress</h3>
                            <div className="value">{progress}%</div>
                            <div className="subtitle">Across all sprints</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)'}}>
                            <h3>Active Tasks</h3>
                            <div className="value">{inProgressTasks}</div>
                            <div className="subtitle">In progress</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)'}}>
                            <h3>Completed</h3>
                            <div className="value">{completedTasks}</div>
                            <div className="subtitle">Done</div>
                        </div>
                        <div className="stat-card" style={{background: 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)'}}>
                            <h3>Team Size</h3>
                            <div className="value">4</div>
                            <div className="subtitle">Members</div>
                        </div>
                    </div>

                    <div className="chart-container">
                        <h2>Task Distribution</h2>
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
            );
        }

        // Roadmap Tab Component
        function RoadmapTab({ tasks }) {
            const calculateSprintProgress = (sprint) => {
                const sprintTasks = tasks.filter(t => t.sprint === sprint);
                if (sprintTasks.length === 0) return 0;
                const done = sprintTasks.filter(t => t.column === 'done').length;
                return Math.round((done / sprintTasks.length) * 100);
            };

            const phases = [
                { num: 1, title: 'Foundation & Infrastructure', weeks: 'Weeks 1-4' },
                { num: 2, title: 'Quant Engine + FnO Signals', weeks: 'Weeks 5-8' },
                { num: 3, title: 'Algorithmic Models', weeks: 'Weeks 9-12' },
                { num: 4, title: 'LLM Robo-Advisory', weeks: 'Weeks 13-16' },
                { num: 5, title: 'Mobile Apps Development', weeks: 'Weeks 17-20' },
                { num: 6, title: 'Testing & Launch', weeks: 'Weeks 21-24' }
            ];

            return (
                <div className="tab-content active">
                    <h2>Development Roadmap</h2>
                    
                    {phases.map(phase => (
                        <div className="roadmap-card" key={phase.num}>
                            <div className="roadmap-phase">
                                <div className="phase-number">{phase.num}</div>
                                <div>
                                    <div className="phase-title">{phase.title}</div>
                                    <div className="phase-duration">{phase.weeks}</div>
                                </div>
                            </div>
                            <div className="progress-bar">
                                <div className="progress-fill" style={{width: `${calculateSprintProgress(phase.num)}%`}}>
                                    {calculateSprintProgress(phase.num)}%
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            );
        }

        // Sprint Tab Component
        function SprintTab({ sprint, tasks, onMoveTask, onDelete, onEdit, onAdd }) {
            const sprintTasks = tasks.filter(t => t.sprint === sprint);
            const todoTasks = sprintTasks.filter(t => t.column === 'todo');
            const inProgressTasks = sprintTasks.filter(t => t.column === 'inprogress');
            const doneTasks = sprintTasks.filter(t => t.column === 'done');

            const sprintData = {
                1: { title: 'Foundation & Infrastructure', weeks: '1-4' },
                2: { title: 'Quant Engine + FnO Signals', weeks: '5-8' },
                3: { title: 'Algorithmic Models', weeks: '9-12' },
                4: { title: 'LLM Robo-Advisory', weeks: '13-16' },
                5: { title: 'Mobile Apps Development', weeks: '17-20' },
                6: { title: 'Testing & Launch', weeks: '21-24' }
            };

            const data = sprintData[sprint];

            const handleDragStart = (e, taskId) => {
                e.dataTransfer.setData('taskId', taskId);
                e.currentTarget.classList.add('dragging');
            };

            const handleDragEnd = (e) => {
                e.currentTarget.classList.remove('dragging');
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            const handleDrop = (e, column) => {
                e.preventDefault();
                const taskId = e.dataTransfer.getData('taskId');
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    onMoveTask(taskId, column, sprint);
                }
            };

            return (
                <div className="tab-content active">
                    <h2>Sprint {sprint}: {data.title}</h2>
                    <p style={{marginBottom: '20px', color: 'var(--text-secondary)'}}>Weeks {data.weeks}</p>
                    
                    <div className="kanban-board">
                        <KanbanColumn
                            title="üìã To Do"
                            tasks={todoTasks}
                            column="todo"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAdd={() => onAdd(sprint, 'todo')}
                            onDelete={onDelete}
                            onEdit={onEdit}
                        />
                        <KanbanColumn
                            title="üîÑ In Progress"
                            tasks={inProgressTasks}
                            column="inprogress"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAdd={() => onAdd(sprint, 'inprogress')}
                            onDelete={onDelete}
                            onEdit={onEdit}
                        />
                        <KanbanColumn
                            title="‚úÖ Done"
                            tasks={doneTasks}
                            column="done"
                            onDragStart={handleDragStart}
                            onDragEnd={handleDragEnd}
                            onDragOver={handleDragOver}
                            onDrop={handleDrop}
                            onAdd={() => onAdd(sprint, 'done')}
                            onDelete={onDelete}
                            onEdit={onEdit}
                        />
                    </div>
                </div>
            );
        }

        // Kanban Column Component
        function KanbanColumn({ title, tasks, column, onDragStart, onDragEnd, onDragOver, onDrop, onAdd, onDelete, onEdit }) {
            return (
                <div className="kanban-column" onDragOver={onDragOver} onDrop={(e) => onDrop(e, column)}>
                    <div className="kanban-header">
                        {title}
                        <span className="kanban-count">{tasks.length}</span>
                    </div>
                    <div className="task-list">
                        {tasks.map(task => (
                            <TaskCard
                                key={task.id}
                                task={task}
                                onDragStart={onDragStart}
                                onDragEnd={onDragEnd}
                                onDelete={onDelete}
                                onEdit={onEdit}
                            />
                        ))}
                    </div>
                    <button className="add-task-btn" onClick={onAdd}>+ Add Task</button>
                </div>
            );
        }

        // Task Card Component
        function TaskCard({ task, onDragStart, onDragEnd, onDelete, onEdit }) {
            const assigneeNames = { 'Y': 'You', 'B': 'Backend', 'M': 'Mobile', 'D': 'DevOps' };

            return (
                <div
                    className="task-card"
                    draggable="true"
                    onDragStart={(e) => onDragStart(e, task.id)}
                    onDragEnd={onDragEnd}
                >
                    <div className="task-actions">
                        <button className="task-action-btn" onClick={() => onEdit(task)} title="Edit">‚úèÔ∏è</button>
                        <button className="task-action-btn delete" onClick={() => onDelete(task.id)} title="Delete">üóëÔ∏è</button>
                    </div>
                    <div className="task-title">{task.title}</div>
                    {task.description && (
                        <div className="task-description">{task.description}</div>
                    )}
                    <div className="task-meta">
                        <span className={`task-priority priority-${task.priority}`}>
                            {task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                        </span>
                        <div className="task-assignee">
                            <div className="avatar">{task.assignee}</div>
                            <span>{assigneeNames[task.assignee]}</span>
                        </div>
                    </div>
                </div>
            );
        }

        // Tech Stack Tab Component
        function TechStackTab({ techStacks, techItems, onAddStack, onEditStack, onDeleteStack, onAddItem, onEditItem, onDeleteItem }) {
            return (
                <div className="tab-content active">
                    <h2>Technology Stack</h2>
                    <button className="add-section-btn" onClick={onAddStack}>+ Add New Tech Stack</button>

                    <div className="tech-stack-grid">
                        {techStacks.map(stack => {
                            const stackItems = techItems.filter(item => item.stackId === stack.id);
                            
                            return (
                                <div className="tech-stack-card" key={stack.id}>
                                    <div className="tech-stack-header">
                                        <h3>{stack.icon} {stack.title}</h3>
                                        <div className="header-actions">
                                            <button className="header-btn" onClick={() => onEditStack(stack)}>‚úèÔ∏è</button>
                                            <button className="header-btn delete" onClick={() => onDeleteStack(stack.id)}>üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    {stackItems.map(item => (
                                        <div className="tech-item-card" key={item.id}>
                                            <div className="item-actions">
                                                <button className="item-action-btn" onClick={() => onEditItem(item)}>‚úèÔ∏è</button>
                                                <button className="item-action-btn delete" onClick={() => onDeleteItem(item.id)}>üóëÔ∏è</button>
                                            </div>
                                            <div className="item-name">
                                                {item.name}
                                                {item.badge && <span className="tech-badge">{item.badge}</span>}
                                            </div>
                                        </div>
                                    ))}
                                    <button className="add-item-btn" onClick={() => onAddItem(stack.id)}>+ Add Item</button>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        }

        // Economics Tab Component (ENHANCED WITH REVENUE AND CHARTS)
        function EconomicsTab({ costs, revenue, onAddCost, onEditCost, onDeleteCost, onAddRevenue, onEditRevenue, onDeleteRevenue }) {
            const categorizedCosts = {
                sunk: costs.filter(c => c.category === 'sunk'),
                fixed: costs.filter(c => c.category === 'fixed'),
                variable: costs.filter(c => c.category === 'variable'),
                semiVariable: costs.filter(c => c.category === 'semiVariable')
            };

            const userTiers = ['0-100', '100-500', '500-1000', '1000-2500', '2500-5000', '5000-10000', '10000+'];

            useEffect(() => {
                setTimeout(() => {
                    // Revenue vs Cost Chart
                    const revCostCtx = document.getElementById('revenueCostChart');
                    if (revCostCtx && !revCostCtx.chart) {
                        const revenueData = revenue.map(r => parseFloat((r.revenue || '0').replace(/[‚Çπ,]/g, '')));
                        const costData = userTiers.map(tier => calculateCostTotal(costs, tier));
                        
                        revCostCtx.chart = new Chart(revCostCtx, {
                            type: 'line',
                            data: {
                                labels: userTiers,
                                datasets: [
                                    {
                                        label: 'Revenue',
                                        data: revenueData,
                                        borderColor: '#10b981',
                                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                        tension: 0.4,
                                        fill: true
                                    },
                                    {
                                        label: 'Total Costs',
                                        data: costData,
                                        borderColor: '#ef4444',
                                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                        tension: 0.4,
                                        fill: true
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { beginAtZero: true }
                                }
                            }
                        });
                    }

                    // Profit Margin Chart
                    const profitCtx = document.getElementById('profitChart');
                    if (profitCtx && !profitCtx.chart) {
                        const profitData = userTiers.map((tier, idx) => {
                            const rev = parseFloat((revenue[idx]?.revenue || '0').replace(/[‚Çπ,]/g, ''));
                            const cost = calculateCostTotal(costs, tier);
                            return rev - cost;
                        });

                        profitCtx.chart = new Chart(profitCtx, {
                            type: 'bar',
                            data: {
                                labels: userTiers,
                                datasets: [{
                                    label: 'Net Profit',
                                    data: profitData,
                                    backgroundColor: profitData.map(p => p >= 0 ? 'rgba(16, 185, 129, 0.7)' : 'rgba(239, 68, 68, 0.7)'),
                                    borderColor: profitData.map(p => p >= 0 ? '#10b981' : '#ef4444'),
                                    borderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { beginAtZero: true }
                                }
                            }
                        });
                    }

                    // Cost Breakdown Chart
                    const breakdownCtx = document.getElementById('costBreakdownChart');
                    if (breakdownCtx && !breakdownCtx.chart) {
                        const categories = ['Sunk', 'Fixed', 'Variable', 'Semi-Variable'];
                        const categoryTotals = [
                            categorizedCosts.sunk.reduce((sum, c) => sum + parseFloat((c.cost0_100 || '0').replace(/[‚Çπ,]/g, '')), 0),
                            categorizedCosts.fixed.reduce((sum, c) => sum + parseFloat((c.cost0_100 || '0').replace(/[‚Çπ,]/g, '')), 0),
                            categorizedCosts.variable.reduce((sum, c) => sum + parseFloat((c.cost0_100 || '0').replace(/[‚Çπ,]/g, '')), 0),
                            categorizedCosts.semiVariable.reduce((sum, c) => sum + parseFloat((c.cost0_100 || '0').replace(/[‚Çπ,]/g, '')), 0)
                        ];

                        breakdownCtx.chart = new Chart(breakdownCtx, {
                            type: 'doughnut',
                            data: {
                                labels: categories,
                                datasets: [{
                                    data: categoryTotals,
                                    backgroundColor: ['#8b5cf6', '#2563eb', '#ef4444', '#f59e0b']
                                }]
                            },
                            options: { responsive: true }
                        });
                    }

                    // Unit Economics Chart
                    const unitEconCtx = document.getElementById('unitEconomicsChart');
                    if (unitEconCtx && !unitEconCtx.chart) {
                        const costPerUser = userTiers.map((tier, idx) => {
                            const avgUsers = [50, 300, 750, 1750, 3750, 7500, 15000][idx];
                            const totalCost = calculateCostTotal(costs, tier);
                            return avgUsers > 0 ? (totalCost / avgUsers).toFixed(2) : 0;
                        });

                        unitEconCtx.chart = new Chart(unitEconCtx, {
                            type: 'line',
                            data: {
                                labels: userTiers,
                                datasets: [{
                                    label: 'Cost per User (‚Çπ)',
                                    data: costPerUser,
                                    borderColor: '#06b6d4',
                                    backgroundColor: 'rgba(6, 182, 212, 0.1)',
                                    tension: 0.4,
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { beginAtZero: true }
                                }
                            }
                        });
                    }
                }, 100);
            }, [costs, revenue]);

            return (
                <div className="tab-content active">
                    <h2>Project Economics & Scale Analysis</h2>
                    
                    {/* Revenue Section */}
                    <div style={{marginTop: '30px'}}>
                        <h3 style={{marginBottom: '15px'}}>Revenue Projections</h3>
                        <button className="add-section-btn" onClick={onAddRevenue}>+ Add Revenue Tier</button>
                        
                        {revenue.map(rev => (
                            <div className="revenue-card" key={rev.id}>
                                <div className="revenue-header">
                                    <div>
                                        <div className="revenue-tier">{rev.userTier} Users</div>
                                        <div style={{fontSize: '0.9em', color: 'var(--text-secondary)', marginTop: '5px'}}>
                                            {rev.description}
                                        </div>
                                    </div>
                                    <div className="revenue-amount">{rev.revenue}</div>
                                </div>
                                <div className="row-actions" style={{position: 'relative', opacity: 1, marginTop: '10px'}}>
                                    <button className="row-action-btn" onClick={() => onEditRevenue(rev)}>‚úèÔ∏è Edit</button>
                                    <button className="row-action-btn delete" onClick={() => onDeleteRevenue(rev.id)}>üóëÔ∏è Delete</button>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* Cost Section */}
                    <div style={{marginTop: '40px'}}>
                        <h3 style={{marginBottom: '15px'}}>Cost Structure</h3>
                        <button className="add-section-btn" onClick={onAddCost}>+ Add New Cost Item</button>

                        <table className="economics-table">
                            <thead>
                                <tr>
                                    <th>Cost Item</th>
                                    <th>Type</th>
                                    <th>0-100</th>
                                    <th>100-500</th>
                                    <th>500-1K</th>
                                    <th>1K-2.5K</th>
                                    <th>2.5K-5K</th>
                                    <th>5K-10K</th>
                                    <th>10K+</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                    <td colSpan="9">SUNK COSTS (One-Time)</td>
                                </tr>
                                {categorizedCosts.sunk.map(cost => (
                                    <tr key={cost.id}>
                                        <td>
                                            {cost.name}
                                            <div className="row-actions">
                                                <button className="row-action-btn" onClick={() => onEditCost(cost)}>‚úèÔ∏è</button>
                                                <button className="row-action-btn delete" onClick={() => onDeleteCost(cost.id)}>üóëÔ∏è</button>
                                            </div>
                                        </td>
                                        <td>{cost.type}</td>
                                        <td>{cost.cost0_100}</td>
                                        <td>{cost.cost100_500}</td>
                                        <td>{cost.cost500_1k}</td>
                                        <td>{cost.cost1k_2500}</td>
                                        <td>{cost.cost2500_5k}</td>
                                        <td>{cost.cost5k_10k}</td>
                                        <td>{cost.cost10k}</td>
                                    </tr>
                                ))}
                                
                                <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                    <td colSpan="9">FIXED COSTS (Monthly)</td>
                                </tr>
                                {categorizedCosts.fixed.map(cost => (
                                    <tr key={cost.id}>
                                        <td>
                                            {cost.name}
                                            <div className="row-actions">
                                                <button className="row-action-btn" onClick={() => onEditCost(cost)}>‚úèÔ∏è</button>
                                                <button className="row-action-btn delete" onClick={() => onDeleteCost(cost.id)}>üóëÔ∏è</button>
                                            </div>
                                        </td>
                                        <td>{cost.type}</td>
                                        <td>{cost.cost0_100}</td>
                                        <td>{cost.cost100_500}</td>
                                        <td>{cost.cost500_1k}</td>
                                        <td>{cost.cost1k_2500}</td>
                                        <td>{cost.cost2500_5k}</td>
                                        <td>{cost.cost5k_10k}</td>
                                        <td>{cost.cost10k}</td>
                                    </tr>
                                ))}
                                
                                <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                    <td colSpan="9">VARIABLE COSTS (Per User)</td>
                                </tr>
                                {categorizedCosts.variable.map(cost => (
                                    <tr key={cost.id}>
                                        <td>
                                            {cost.name}
                                            <div className="row-actions">
                                                <button className="row-action-btn" onClick={() => onEditCost(cost)}>‚úèÔ∏è</button>
                                                <button className="row-action-btn delete" onClick={() => onDeleteCost(cost.id)}>üóëÔ∏è</button>
                                            </div>
                                        </td>
                                        <td>{cost.type}</td>
                                        <td>{cost.cost0_100}</td>
                                        <td>{cost.cost100_500}</td>
                                        <td>{cost.cost500_1k}</td>
                                        <td>{cost.cost1k_2500}</td>
                                        <td>{cost.cost2500_5k}</td>
                                        <td>{cost.cost5k_10k}</td>
                                        <td>{cost.cost10k}</td>
                                    </tr>
                                ))}
                                
                                <tr style={{background: 'var(--bg-secondary)', fontWeight: 700}}>
                                    <td colSpan="9">SEMI-VARIABLE COSTS</td>
                                </tr>
                                {categorizedCosts.semiVariable.map(cost => (
                                    <tr key={cost.id}>
                                        <td>
                                            {cost.name}
                                            <div className="row-actions">
                                                <button className="row-action-btn" onClick={() => onEditCost(cost)}>‚úèÔ∏è</button>
                                                <button className="row-action-btn delete" onClick={() => onDeleteCost(cost.id)}>üóëÔ∏è</button>
                                            </div>
                                        </td>
                                        <td>{cost.type}</td>
                                        <td>{cost.cost0_100}</td>
                                        <td>{cost.cost100_500}</td>
                                        <td>{cost.cost500_1k}</td>
                                        <td>{cost.cost1k_2500}</td>
                                        <td>{cost.cost2500_5k}</td>
                                        <td>{cost.cost5k_10k}</td>
                                        <td>{cost.cost10k}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {/* Charts Section */}
                    <div className="charts-grid">
                        <div className="chart-container">
                            <h2>Revenue vs Costs</h2>
                            <canvas id="revenueCostChart"></canvas>
                        </div>

                        <div className="chart-container">
                            <h2>Net Profit by User Tier</h2>
                            <canvas id="profitChart"></canvas>
                        </div>

                        <div className="chart-container">
                            <h2>Cost Breakdown (0-100 Users)</h2>
                            <canvas id="costBreakdownChart"></canvas>
                        </div>

                        <div className="chart-container">
                            <h2>Unit Economics (Cost per User)</h2>
                            <canvas id="unitEconomicsChart"></canvas>
                        </div>
                    </div>
                </div>
            );
        }

        // Universal Modal Component
        function UniversalModal({ type, item, onClose, onSubmit }) {
            const getInitialData = () => {
                if (type === 'task') {
                    return {
                        title: item?.title || '',
                        description: item?.description || '',
                        priority: item?.priority || 'high',
                        assignee: item?.assignee || 'Y'
                    };
                } else if (type === 'techStack') {
                    return {
                        title: item?.title || '',
                        icon: item?.icon || 'üñ•Ô∏è'
                    };
                } else if (type === 'techItem') {
                    return {
                        name: item?.name || '',
                        badge: item?.badge || ''
                    };
                } else if (type === 'cost') {
                    return {
                        name: item?.name || '',
                        category: item?.category || 'fixed',
                        type: item?.type || 'Fixed',
                        cost0_100: item?.cost0_100 || '‚Çπ0',
                        cost100_500: item?.cost100_500 || '‚Çπ0',
                        cost500_1k: item?.cost500_1k || '‚Çπ0',
                        cost1k_2500: item?.cost1k_2500 || '‚Çπ0',
                        cost2500_5k: item?.cost2500_5k || '‚Çπ0',
                        cost5k_10k: item?.cost5k_10k || '‚Çπ0',
                        cost10k: item?.cost10k || '‚Çπ0'
                    };
                } else if (type === 'revenue') {
                    return {
                        userTier: item?.userTier || '0-100',
                        revenue: item?.revenue || '‚Çπ0',
                        description: item?.description || 'Free tier users'
                    };
                }
            };

            const [formData, setFormData] = useState(getInitialData());

            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit(formData);
            };

            const renderFormFields = () => {
                if (type === 'task') {
                    return (
                        <>
                            <div className="form-group">
                                <label>Task Title *</label>
                                <input type="text" value={formData.title} 
                                    onChange={(e) => setFormData({...formData, title: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label>Description</label>
                                <textarea rows="3" value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Priority *</label>
                                <select value={formData.priority}
                                    onChange={(e) => setFormData({...formData, priority: e.target.value})} required>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>Assignee *</label>
                                <select value={formData.assignee}
                                    onChange={(e) => setFormData({...formData, assignee: e.target.value})} required>
                                    <option value="Y">You</option>
                                    <option value="B">Backend Dev</option>
                                    <option value="M">Mobile Dev</option>
                                    <option value="D">DevOps</option>
                                </select>
                            </div>
                        </>
                    );
                } else if (type === 'techStack') {
                    return (
                        <>
                            <div className="form-group">
                                <label>Stack Title *</label>
                                <input type="text" value={formData.title}
                                    onChange={(e) => setFormData({...formData, title: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label>Icon/Emoji</label>
                                <input type="text" value={formData.icon}
                                    onChange={(e) => setFormData({...formData, icon: e.target.value})} />
                            </div>
                        </>
                    );
                } else if (type === 'techItem') {
                    return (
                        <>
                            <div className="form-group">
                                <label>Item Name *</label>
                                <input type="text" value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label>Badge (Optional)</label>
                                <input type="text" value={formData.badge}
                                    onChange={(e) => setFormData({...formData, badge: e.target.value})} />
                            </div>
                        </>
                    );
                } else if (type === 'cost') {
                    return (
                        <>
                            <div className="form-group">
                                <label>Cost Name *</label>
                                <input type="text" value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label>Category *</label>
                                <select value={formData.category}
                                    onChange={(e) => setFormData({...formData, category: e.target.value})} required>
                                    <option value="sunk">Sunk</option>
                                    <option value="fixed">Fixed</option>
                                    <option value="variable">Variable</option>
                                    <option value="semiVariable">Semi-Variable</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>Type Label</label>
                                <input type="text" value={formData.type}
                                    onChange={(e) => setFormData({...formData, type: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (0-100 users)</label>
                                <input type="text" value={formData.cost0_100}
                                    onChange={(e) => setFormData({...formData, cost0_100: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (100-500 users)</label>
                                <input type="text" value={formData.cost100_500}
                                    onChange={(e) => setFormData({...formData, cost100_500: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (500-1K users)</label>
                                <input type="text" value={formData.cost500_1k}
                                    onChange={(e) => setFormData({...formData, cost500_1k: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (1K-2.5K users)</label>
                                <input type="text" value={formData.cost1k_2500}
                                    onChange={(e) => setFormData({...formData, cost1k_2500: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (2.5K-5K users)</label>
                                <input type="text" value={formData.cost2500_5k}
                                    onChange={(e) => setFormData({...formData, cost2500_5k: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (5K-10K users)</label>
                                <input type="text" value={formData.cost5k_10k}
                                    onChange={(e) => setFormData({...formData, cost5k_10k: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label>Cost (10K+ users)</label>
                                <input type="text" value={formData.cost10k}
                                    onChange={(e) => setFormData({...formData, cost10k: e.target.value})} />
                            </div>
                        </>
                    );
                } else if (type === 'revenue') {
                    return (
                        <>
                            <div className="form-group">
                                <label>User Tier *</label>
                                <select value={formData.userTier}
                                    onChange={(e) => setFormData({...formData, userTier: e.target.value})} required>
                                    <option value="0-100">0-100</option>
                                    <option value="100-500">100-500</option>
                                    <option value="500-1000">500-1000</option>
                                    <option value="1000-2500">1000-2500</option>
                                    <option value="2500-5000">2500-5000</option>
                                    <option value="5000-10000">5000-10000</option>
                                    <option value="10000+">10000+</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>Monthly Revenue *</label>
                                <input type="text" value={formData.revenue}
                                    onChange={(e) => setFormData({...formData, revenue: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label>Description</label>
                                <textarea rows="2" value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})} />
                            </div>
                        </>
                    );
                }
            };

            const getTitle = () => {
                const titles = {
                    task: 'Task',
                    techStack: 'Tech Stack',
                    techItem: 'Tech Item',
                    cost: 'Cost Item',
                    revenue: 'Revenue Tier'
                };
                return `${item ? 'Edit' : 'Add'} ${titles[type]}`;
            };

            return (
                <div className="modal active" onClick={(e) => e.target.className === 'modal active' && onClose()}>
                    <div className="modal-content">
                        <h2>{getTitle()}</h2>
                        <form onSubmit={handleSubmit}>
                            {renderFormFields()}
                            <div className="btn-group">
                                <button type="submit" className="btn btn-primary">
                                    {item ? 'Update' : 'Add'}
                                </button>
                                <button type="button" className="btn btn-secondary" onClick={onClose}>
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Default data functions remain same but with updated cost structure
        function getDefaultTasks() {
            return [
                { id: '1', sprint: 1, column: 'todo', title: 'MacBook M5 16GB Setup', description: 'Purchase ‚Çπ1,69,900 and configure dev environment', priority: 'high', assignee: 'Y' },
                { id: '2', sprint: 1, column: 'todo', title: 'FastAPI Backend Skeleton', description: 'Setup project structure, PostgreSQL', priority: 'high', assignee: 'B' },
                { id: '3', sprint: 1, column: 'inprogress', title: 'AWS Infrastructure', description: 'RDS, ElastiCache, S3, ECS Fargate setup', priority: 'medium', assignee: 'D' },
                { id: '4', sprint: 1, column: 'todo', title: 'Authentication (Clerk)', description: 'Integrate Clerk auth system', priority: 'high', assignee: 'B' },
                { id: '5', sprint: 2, column: 'todo', title: 'FnO Data Pipeline', description: 'NSE options chain integration', priority: 'high', assignee: 'Y' },
                { id: '6', sprint: 2, column: 'todo', title: 'PCR Calculator', description: 'Real-time Put-Call Ratio signals', priority: 'high', assignee: 'Y' },
                { id: '7', sprint: 3, column: 'todo', title: 'SARIMAX Models', description: 'Time series forecasting implementation', priority: 'high', assignee: 'Y' },
                { id: '8', sprint: 3, column: 'todo', title: 'Monte Carlo Simulations', description: 'Portfolio risk analysis', priority: 'medium', assignee: 'Y' },
                { id: '9', sprint: 4, column: 'todo', title: 'Gemma 3B Fine-tuning', description: 'LLM training on stock recommendations', priority: 'high', assignee: 'Y' },
                { id: '10', sprint: 4, column: 'todo', title: 'RAG Pipeline', description: 'LangChain + Pinecone integration', priority: 'high', assignee: 'Y' },
                { id: '11', sprint: 5, column: 'todo', title: 'React Native App', description: 'Mobile app development with Expo', priority: 'high', assignee: 'M' },
                { id: '12', sprint: 5, column: 'todo', title: 'Portfolio Dashboard', description: 'Real-time portfolio tracking UI', priority: 'medium', assignee: 'M' },
                { id: '13', sprint: 6, column: 'todo', title: 'Beta Testing', description: 'TestFlight and Google Play testing', priority: 'medium', assignee: 'M' },
                { id: '14', sprint: 6, column: 'todo', title: 'SEBI Compliance Review', description: 'Legal compliance verification', priority: 'high', assignee: 'Y' },
                { id: '15', sprint: 1, column: 'done', title: 'Project Kickoff', description: 'Planning and team setup completed', priority: 'high', assignee: 'Y' }
            ];
        }

        function getDefaultTechStacks() {
            return [
                { id: '1', title: 'Backend & ML', icon: 'üñ•Ô∏è' },
                { id: '2', title: 'LLM & RAG', icon: 'ü§ñ' },
                { id: '3', title: 'Mobile & Frontend', icon: 'üì±' },
                { id: '4', title: 'Cloud & Infrastructure', icon: '‚òÅÔ∏è' },
                { id: '5', title: 'DevOps & Tools', icon: 'üîß' },
                { id: '6', title: 'Hardware', icon: 'üíª' }
            ];
        }

        function getDefaultTechItems() {
            return [
                { id: '1', stackId: '1', name: 'Python 3.11+', badge: 'Primary' },
                { id: '2', stackId: '1', name: 'FastAPI', badge: 'Framework' },
                { id: '3', stackId: '1', name: 'PostgreSQL 15+', badge: 'Database' },
                { id: '4', stackId: '1', name: 'Redis 7+', badge: 'Cache' },
                { id: '5', stackId: '1', name: 'Celery', badge: 'Jobs' },
                { id: '6', stackId: '1', name: 'pandas, numpy, scikit-learn', badge: '' },
                { id: '7', stackId: '1', name: 'PyTorch 2.x', badge: 'Deep Learning' },
                { id: '8', stackId: '1', name: 'skforecast', badge: 'SARIMAX' },
                { id: '9', stackId: '1', name: 'TA-Lib', badge: 'Technical' },
                { id: '10', stackId: '2', name: 'Gemma 3B', badge: 'Model' },
                { id: '11', stackId: '2', name: 'transformers 4.x', badge: 'HuggingFace' },
                { id: '12', stackId: '2', name: 'MLX', badge: 'Mac GPU' },
                { id: '13', stackId: '2', name: 'LangChain 0.1+', badge: 'RAG' },
                { id: '14', stackId: '2', name: 'Pinecone', badge: 'Vector DB' },
                { id: '15', stackId: '2', name: 'sentence-transformers', badge: '' },
                { id: '16', stackId: '2', name: 'peft', badge: 'LoRA' },
                { id: '17', stackId: '2', name: 'HuggingFace Inference', badge: 'Production' },
                { id: '18', stackId: '3', name: 'React Native', badge: 'Mobile' },
                { id: '19', stackId: '3', name: 'Expo', badge: 'Build' },
                { id: '20', stackId: '3', name: 'Next.js 14+', badge: 'Web' },
                { id: '21', stackId: '3', name: 'TypeScript', badge: '' },
                { id: '22', stackId: '3', name: 'shadcn/ui + TailwindCSS', badge: '' },
                { id: '23', stackId: '3', name: 'React Query', badge: 'State' },
                { id: '24', stackId: '3', name: 'TradingView Charts', badge: '' },
                { id: '25', stackId: '3', name: 'Zustand', badge: 'Local State' },
                { id: '26', stackId: '4', name: 'AWS', badge: 'Cloud' },
                { id: '27', stackId: '4', name: 'ECS Fargate', badge: 'Backend' },
                { id: '28', stackId: '4', name: 'RDS PostgreSQL', badge: '' },
                { id: '29', stackId: '4', name: 'ElastiCache Redis', badge: '' },
                { id: '30', stackId: '4', name: 'S3', badge: 'Storage' },
                { id: '31', stackId: '4', name: 'SageMaker', badge: 'LLM' },
                { id: '32', stackId: '4', name: 'CloudFlare', badge: 'CDN' },
                { id: '33', stackId: '4', name: 'Clerk', badge: 'Auth' },
                { id: '34', stackId: '5', name: 'GitHub', badge: 'VCS' },
                { id: '35', stackId: '5', name: 'GitHub Actions', badge: 'CI/CD' },
                { id: '36', stackId: '5', name: 'Docker', badge: '' },
                { id: '37', stackId: '5', name: 'Sentry', badge: 'Errors' },
                { id: '38', stackId: '5', name: 'PostHog', badge: 'Analytics' },
                { id: '39', stackId: '5', name: 'pytest + Jest', badge: 'Testing' },
                { id: '40', stackId: '5', name: 'VS Code + Copilot', badge: '' },
                { id: '41', stackId: '6', name: 'MacBook Air M5 16GB', badge: 'Dev' },
                { id: '42', stackId: '6', name: '‚Çπ1,69,900', badge: 'Price' },
                { id: '43', stackId: '6', name: '3.5x faster AI performance', badge: '' },
                { id: '44', stackId: '6', name: 'MLX for local LLM testing', badge: '' },
                { id: '45', stackId: '6', name: '12-hour fine-tuning', badge: '' },
                { id: '46', stackId: '6', name: 'Portable development', badge: '' }
            ];
        }

        function getDefaultCosts() {
            return [
                // SUNK COSTS
                { id: '1', name: 'MacBook M5 16GB', category: 'sunk', type: 'Sunk', cost0_100: '‚Çπ1,69,900', cost100_500: '-', cost500_1k: '-', cost1k_2500: '-', cost2500_5k: '-', cost5k_10k: '-', cost10k: '-' },
                { id: '2', name: 'Apple Developer', category: 'sunk', type: 'Sunk', cost0_100: '‚Çπ8,340/yr', cost100_500: '‚Çπ8,340/yr', cost500_1k: '‚Çπ8,340/yr', cost1k_2500: '‚Çπ8,340/yr', cost2500_5k: '‚Çπ8,340/yr', cost5k_10k: '‚Çπ8,340/yr', cost10k: '‚Çπ8,340/yr' },
                { id: '3', name: 'Google Play Console', category: 'sunk', type: 'Sunk', cost0_100: '‚Çπ2,100', cost100_500: '-', cost500_1k: '-', cost1k_2500: '-', cost2500_5k: '-', cost5k_10k: '-', cost10k: '-' },
                { id: '4', name: 'Domain Registration', category: 'sunk', type: 'Sunk', cost0_100: '‚Çπ2,500', cost100_500: '-', cost500_1k: '-', cost1k_2500: '-', cost2500_5k: '-', cost5k_10k: '-', cost10k: '-' },
                
                // FIXED COSTS
                { id: '5', name: 'Backend (AWS Fargate)', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ3,400', cost100_500: '‚Çπ3,400', cost500_1k: '‚Çπ3,400', cost1k_2500: '‚Çπ4,500', cost2500_5k: '‚Çπ6,800', cost5k_10k: '‚Çπ10,200', cost10k: '‚Çπ13,600' },
                { id: '6', name: 'Database (RDS PostgreSQL)', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ1,250', cost100_500: '‚Çπ1,250', cost500_1k: '‚Çπ1,250', cost1k_2500: '‚Çπ1,800', cost2500_5k: '‚Çπ2,500', cost5k_10k: '‚Çπ3,750', cost10k: '‚Çπ5,000' },
                { id: '7', name: 'Redis Cache', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ840', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ840', cost1k_2500: '‚Çπ1,200', cost2500_5k: '‚Çπ1,680', cost5k_10k: '‚Çπ2,100', cost10k: '‚Çπ2,500' },
                { id: '8', name: 'Expo EAS Build', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ1,600', cost100_500: '‚Çπ1,600', cost500_1k: '‚Çπ1,600', cost1k_2500: '‚Çπ1,600', cost2500_5k: '‚Çπ1,600', cost5k_10k: '‚Çπ1,600', cost10k: '‚Çπ1,600' },
                { id: '9', name: 'Domain & Email', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ1,250', cost100_500: '‚Çπ1,250', cost500_1k: '‚Çπ1,250', cost1k_2500: '‚Çπ1,250', cost2500_5k: '‚Çπ1,250', cost5k_10k: '‚Çπ1,250', cost10k: '‚Çπ1,250' },
                { id: '10', name: 'CDN (CloudFlare)', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ0', cost100_500: '‚Çπ0', cost500_1k: '‚Çπ1,670', cost1k_2500: '‚Çπ1,670', cost2500_5k: '‚Çπ2,500', cost5k_10k: '‚Çπ3,340', cost10k: '‚Çπ4,170' },
                { id: '11', name: 'Monitoring (Sentry)', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ0', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ1,680', cost1k_2500: '‚Çπ2,100', cost2500_5k: '‚Çπ2,500', cost5k_10k: '‚Çπ3,340', cost10k: '‚Çπ4,170' },
                
                // VARIABLE COSTS
                { id: '12', name: 'LLM Inference (HuggingFace)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ4,170', cost500_1k: '‚Çπ8,340', cost1k_2500: '‚Çπ20,850', cost2500_5k: '‚Çπ41,700', cost5k_10k: '‚Çπ62,550', cost10k: '‚Çπ83,400' },
                { id: '13', name: 'Vector DB (Pinecone)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ0', cost500_1k: '‚Çπ2,100', cost1k_2500: '‚Çπ3,135', cost2500_5k: '‚Çπ4,170', cost5k_10k: '‚Çπ6,255', cost10k: '‚Çπ8,340' },
                { id: '14', name: 'Storage (S3)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ420', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ1,250', cost1k_2500: '‚Çπ2,710', cost2500_5k: '‚Çπ4,170', cost5k_10k: '‚Çπ6,255', cost10k: '‚Çπ8,340' },
                { id: '15', name: 'Bandwidth', category: 'variable', type: 'Variable', cost0_100: '‚Çπ210', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ1,680', cost1k_2500: '‚Çπ2,925', cost2500_5k: '‚Çπ4,170', cost5k_10k: '‚Çπ6,255', cost10k: '‚Çπ8,340' },
                { id: '16', name: 'Database I/O', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ420', cost500_1k: '‚Çπ840', cost1k_2500: '‚Çπ1,670', cost2500_5k: '‚Çπ2,500', cost5k_10k: '‚Çπ3,750', cost10k: '‚Çπ5,000' },
                { id: '17', name: 'Push Notifications', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ210', cost500_1k: '‚Çπ420', cost1k_2500: '‚Çπ1,050', cost2500_5k: '‚Çπ1,680', cost5k_10k: '‚Çπ2,510', cost10k: '‚Çπ3,340' },
                { id: '18', name: 'SMS/Email (Twilio)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ420', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ1,250', cost1k_2500: '‚Çπ2,710', cost2500_5k: '‚Çπ4,170', cost5k_10k: '‚Çπ6,255', cost10k: '‚Çπ8,340' },
                { id: '19', name: 'Auth (Clerk)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ0', cost500_1k: '‚Çπ0', cost1k_2500: '‚Çπ210', cost2500_5k: '‚Çπ420', cost5k_10k: '‚Çπ1,050', cost10k: '‚Çπ1,680' },
                
                // SEMI-VARIABLE COSTS
                { id: '20', name: 'Customer Support', category: 'semiVariable', type: 'Semi-Var', cost0_100: '‚Çπ0', cost100_500: '‚Çπ840', cost500_1k: '‚Çπ1,680', cost1k_2500: '‚Çπ2,925', cost2500_5k: '‚Çπ4,170', cost5k_10k: '‚Çπ6,255', cost10k: '‚Çπ8,340' },
                { id: '21', name: 'Payment Gateway (2%)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ0', cost100_500: '‚Çπ4,674', cost500_1k: '‚Çπ11,685', cost1k_2500: '‚Çπ27,265', cost2500_5k: '‚Çπ58,425', cost5k_10k: '‚Çπ116,850', cost10k: '‚Çπ233,700' },
                { id: '22', name: 'Compliance & Legal', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ2,500', cost100_500: '‚Çπ2,500', cost500_1k: '‚Çπ4,170', cost1k_2500: '‚Çπ6,255', cost2500_5k: '‚Çπ8,340', cost5k_10k: '‚Çπ10,425', cost10k: '‚Çπ12,500' },
                
                // Additional comprehensive costs
                { id: '23', name: 'SSL Certificates', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ500', cost100_500: '‚Çπ500', cost500_1k: '‚Çπ500', cost1k_2500: '‚Çπ500', cost2500_5k: '‚Çπ500', cost5k_10k: '‚Çπ500', cost10k: '‚Çπ500' },
                { id: '24', name: 'API Rate Limits (Third-party)', category: 'variable', type: 'Variable', cost0_100: '‚Çπ200', cost100_500: '‚Çπ600', cost500_1k: '‚Çπ1,200', cost1k_2500: '‚Çπ2,400', cost2500_5k: '‚Çπ4,800', cost5k_10k: '‚Çπ7,200', cost10k: '‚Çπ10,000' },
                { id: '25', name: 'Backup & Disaster Recovery', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ500', cost100_500: '‚Çπ750', cost500_1k: '‚Çπ1,000', cost1k_2500: '‚Çπ1,500', cost2500_5k: '‚Çπ2,000', cost5k_10k: '‚Çπ2,500', cost10k: '‚Çπ3,000' },
                { id: '26', name: 'Security Audits', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ0', cost100_500: '‚Çπ5,000', cost500_1k: '‚Çπ5,000', cost1k_2500: '‚Çπ7,500', cost2500_5k: '‚Çπ10,000', cost5k_10k: '‚Çπ12,500', cost10k: '‚Çπ15,000' },
                { id: '27', name: 'Content Delivery Network', category: 'variable', type: 'Variable', cost0_100: '‚Çπ100', cost100_500: '‚Çπ300', cost500_1k: '‚Çπ600', cost1k_2500: '‚Çπ1,200', cost2500_5k: '‚Çπ2,400', cost5k_10k: '‚Çπ3,600', cost10k: '‚Çπ5,000' },
                { id: '28', name: 'Load Balancer', category: 'fixed', type: 'Fixed', cost0_100: '‚Çπ0', cost100_500: '‚Çπ1,000', cost500_1k: '‚Çπ1,000', cost1k_2500: '‚Çπ1,500', cost2500_5k: '‚Çπ2,000', cost5k_10k: '‚Çπ2,500', cost10k: '‚Çπ3,000' }
            ];
        }

        function getDefaultRevenue() {
            return [
                { id: '1', userTier: '0-100', revenue: '‚Çπ0', description: 'Free tier users' },
                { id: '2', userTier: '100-500', revenue: '‚Çπ2,33,700', description: '60% Starter, 30% Pro, 10% Elite' },
                { id: '3', userTier: '500-1000', revenue: '‚Çπ5,84,250', description: 'Mixed pricing tiers' },
                { id: '4', userTier: '1000-2500', revenue: '‚Çπ13,63,250', description: 'Growing user base' },
                { id: '5', userTier: '2500-5000', revenue: '‚Çπ29,21,250', description: 'Scaled operations' },
                { id: '6', userTier: '5000-10000', revenue: '‚Çπ58,42,500', description: 'Enterprise scale' },
                { id: '7', userTier: '10000+', revenue: '‚Çπ1,16,85,000', description: 'Mass market penetration' }
            ];
        }

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>